(function(z){
var IF=function(a){a.di=!1;a.status=0;z.Sz(a)};var JF=function(a,b){a.url=b};var KF=function(a){a.sy=!0;a.yD=z.Bi(a.m()).height;z.lE+=a.yD;z.A(z.fr,function(a){a&&!a.sy&&a.il&&a.$o()})};var LF=function(a){var b={};z.A(a.data.ld(),function(a){b[a]=this.data.get(a)},a);return b};var MF=function(){this.YA="";this.cK=NF};var OF=function(){this.bk="";this.bK=PF};var QF=function(a){return a instanceof MF&&a.constructor===MF&&a.cK===NF?a.YA:"type_error:Const"};var RF=function(){this.JH="";this.fK=SF};
var TF=function(a){function b(a){if(z.ha(a))z.A(a,b);else{if(!(a instanceof z.Xd)){var g=null;a.Yx&&(g=a.ol());a=z.$d(z.Pa(a.pj?a.Bg():String(a)),g)}d+=z.Zd(a);a=a.ol();0==c?c=a:0!=a&&c!=a&&(c=null)}}var c=0,d="";z.A(arguments,b);return z.$d(d,c)};var UF=function(a,b){b.all=!0;return z.Co(a,b)};var VF=function(){z.Ap.call(this,null,null,"搜索话题");this.Ae="";this.data=[z.WC[0]]};var WF=function(a,b){return window.$.post("/question/askpeople",{qid:a,uid:b,op:"remove"})};
var XF=function(a){return 1===a?!0:z.ha(a)?a[3]===z.Z[3]:!1};
var YF=function(a){if(!ZF.test("input"))throw Error("Invalid tag name \x3cinput\x3e.");if("INPUT"in $F)throw Error("Tag name \x3cinput\x3e is not allowed for SafeHtml.");var b=null,c="\x3cinput";if(a)for(var d in a){if(!ZF.test(d))throw Error('Invalid attribute name "'+d+'".');var f=a[d];if(null!=f){var g;g=d;if(f instanceof MF)f=QF(f);else if("style"==g.toLowerCase()){if(!z.ma(f))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof f+" given: "+f);
if(!(f instanceof z.Vd)){var h="",k=void 0;for(k in f){if(!/^[-_a-zA-Z0-9]+$/.test(k))throw Error("Name allows only [-_a-zA-Z0-9], got: "+k);var m=f[k];if(null!=m){if(m instanceof MF)m=QF(m);else if(aG.test(m)){for(var n=!0,t=!0,y=0;y<m.length;y++){var G=m.charAt(y);"'"==G&&t?n=!n:'"'==G&&n&&(t=!t)}n&&t||(m="zClosurez")}else m="zClosurez";h+=k+":"+m+";"}}f=h?(new z.Vd).fo(h):z.NC}f=f instanceof z.Vd&&f.constructor===z.Vd&&f.aK===z.Wd?f.Rz:"type_error:SafeStyle"}else{if(/^on/i.test(g))throw Error('Attribute "'+
g+'" requires goog.string.Const value, "'+f+'" given.');if(g.toLowerCase()in bG)if(f instanceof RF)f=f instanceof RF&&f.constructor===RF&&f.fK===SF?f.JH:"type_error:TrustedResourceUrl";else if(f instanceof OF)f=f instanceof OF&&f.constructor===OF&&f.bK===PF?f.bk:"type_error:SafeUrl";else if(z.ja(f))f instanceof OF||(f=f.pj?f.Bg():String(f),cG.test(f)||(f="about:invalid#zClosurez"),h=new OF,h.bk=f,f=h),f=f.Bg();else throw Error('Attribute "'+g+'" on tag "input" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+
f+'" given.');}f.pj&&(f=f.Bg());g=g+'\x3d"'+z.Pa(String(f))+'"';c+=" "+g}}d=void 0;null!=d?z.ha(d)||(d=[d]):d=[];!0===dG.input?c+="\x3e":(b=TF(d),c+="\x3e"+z.Zd(b)+"\x3c/input\x3e",b=b.ol());(a=a&&a.dir)&&(b=/^(ltr|rtl|auto)$/i.test(a)?0:null);return z.$d(c,b)};var eG=function(a,b){var c=z.Eb(a,b,void 0);return 0<=c?(Array.prototype.splice.call(a,c,1),!0):!1};var fG=function(){z.J.call(this);this.jf="zm-pm-item"};
var gG=function(a){var b=new z.V(!0);b.on("success",function(){var a=z.cf(b);a.r?z.U(a.msg):window.location.reload()});b.ajax("/inbox/delete","type\x3dthread\x26token\x3d"+a)};var hG=function(){z.J.call(this);this.jf="zm-pm-item"};var iG=function(a){if(a.cb().length){var b=new z.Nu;b.use("locationSource",{param:function(a){return{start:a[a.length-1].getAttribute("data-token")}}});b.w(a.Ts)}};var jG=function(a,b){z.Gj("删除私信","你确定要删除这封私信吗？",function(a){a&&kG(this,b)},a)};
var kG=function(a,b){var c=new z.V(!0);a.v().wa(c,"success",function(){var a=z.cf(c);a.r?z.U(a.msg):window.location.reload()});c.ajax("/inbox/delete","type\x3dsingle\x26token\x3d"+b)};var lG=function(a,b,c,d,f){z.Bv.call(this,a,b,f);this.Uw=c||"people";this.KM=d||["zg-follow","zg-unfollow"]};var mG=function(a,b,c,d){z.J.call(this);this.h=a;this.Uw=b||"people";this.JM=c||["zg-btn-follow","zg-btn-unfollow"];this.text=d||["关注","取消关注"]};var nG=function(a){z.J.call(this);this.url=a||"/topic"};
var oG=function(a,b,c){var d=c[0],f="";"topic"!==d[0]&&d[3]&&(f='data-parent\x3d"'+d[3]+'"');b.html('\x3ca href\x3d"'+("topic"===d[0]?"/topic/"+d[2]+"/organize/entire":"javascript:;")+'" data-token\x3d"'+d[2]+'" '+f+' name\x3d"'+d[0]+'"\x3e'+d[1]+"\x3c/a\x3e\x3cul class\x3d'zm-topic-organize-list'\x3e\x3c/ul\x3e");"topic"!==c[0][0]&&b.addClass("zm-topic-organize-loadmore");b=(0,window.$)("ul",(0,window.$)(b));if(1<c.length)for(c=c[1],d=0;d<c.length;d++){var f=c[d],g=(0,window.$)("\x3cli\x3e").addClass("zm-topic-organize-item");
b.append(g);oG(a,g,f)}};var pG=function(a,b,c){z.Hr.call(this,a,b,c)};var qG=function(){z.S.call(this);var a=z.WC;this.sf=a[0][3];this.lB=a[0];this.Wm=a[4];this.uy=a[5];this.Vg="topic"};var rG=function(){var a=z.L("zh-topic-log-list");a&&((new lG(a,null,null,null,!0)).init(),(0,window.$)(a).on("click",'a[name\x3d"revert"]',z.rb(function(a){!1!==a&&z.jB(this)},z.nB({Mp:!0}))).on("click",'.zm-item-meta a[name\x3d"report"]',function(){(new z.uv("activity",(0,window.$)(this).data("id"))).submit();return!1}))};
var sG=function(a){if(z.L("zh-topic-admin-page-wrap")){var b=z.L("zh-topic-del-btn");b&&a.v().g(b,"click",a.KQ)}};var tG=function(a,b){var c=z.yf("li",null,a.jv);z.A(c,function(a){a.getAttribute("data-token")===b[1]&&z.R(a,!1)})};var uG=function(a){var b=z.L("zh-topic-followers-list-wrap");b&&(a=new lG(b,["/topic",(0,window.encodeURI)(a.lB[1]),"followers"].join("/"),null,["zg-btn-follow","zg-btn-unfollow"],!0),a.ti("zm-person-item"),a.init())};
var vG=function(a){var b=z.L("zh-topic-side-head");if(b){var c=z.N("zu-entry-focus-button",b);c&&a.v().g(c,"click",function(){(0,z.EC)(c,"topic","",["zg-btn-green","zg-btn-white"])});a.Sf=z.L("zh-topic-operation-menu");a.Sf&&a.v().g(a.Sf,"click",a.FA)}if(b=z.L("zh-current-topic-bio")){var d=new z.Hr(!0,"/topic/bio/update","bio");z.Ir(d,["tid\x3d"+a.sf]);d.Mb='\x3ca href\x3d"javascript:;" name\x3d"edit"\x3e你在 '+a.lB[0]+" 话题中的经验\x3c/a\x3e";d.MD=!0;d.w(b)}};var wG=function(a){z.Of(a,z.Lf('\x3ca href\x3d"/question/23261456" class\x3d"zg-link-gray-normal"\x3e\x3ci class\x3d"icon-info" style\x3d"vertical-align: -3px; margin-right: 6px"\x3e\x3c/i\x3e如何参与知乎话题的公共编辑？\x3c/a\x3e'))};
var xG=function(a){if(z.L("zh-topic-organize-page-wrap")){var b=z.L("zh-topic-organize-parent-editor");if(b)if(z.Z.gs){var c=new z.Ip(null,a.sf,!0);c.ht=!0;c.w(b);c.addEventListener("remove_tag",function(a){(a=a.data&&a.data.id)&&(0,window.$)("#wedge-"+a).remove()})}else wG(b);if(b=z.L("zh-topic-organize-child-editor"))z.Z.gs?(c=new z.Ip(null,a.sf,!1),c.ht=!0,c.w(b),(0,window.$)("a.entire-link").insertAfter(c.An).show()):wG(b);(0,window.$)("#zm-topic-manage-relation").on("change",'[type\x3d"checkbox"]',
function(){var a=(0,window.$)(this).closest("li").attr("id").split("-")[1];window.$.post("/topic/update",{action:"set_topic_edge",parent_topic_id:a,topic_id:z.WC[0][3],edge:this.checked^0}).done(function(a){a&&a.msg&&z.U(a.msg)})});a.iv=z.L("zh-topic-alias-input");new z.tn(a.iv,"输入话题别名");a.jv=z.L("zh-topic-alias-list");a.v().g(z.L("zh-topic-alias-container"),"click",a.AR);if(b=z.L("zh-topic-merge"))a.Ka=new VF,a.Ka.w(b);(b=z.L("zh-topic-merge-btn"))&&a.v().g(b,"click",a.aR)}};
var yG=function(){var a=z.L("zh-topic-organize-page-children");a&&(new nG("/topic/"+(0,window.encodeURIComponent)(z.WC[0][1])+"/organize/entire")).w(a)};var zG=function(a){var b=z.L("zh-topic-side-related-topics");b&&(a.ES=b,a.aA=new z.V(!1),a.v().g(a.aA,"complete",a.jR),a.aA.ajax("/topic/related?tid\x3d"+a.sf))};
var AG=function(a){if(z.wu)(0,window.$)("div.topic-avatar").addClass("disabled");else{var b=z.N("zm-entry-head-avatar-edit-button");if(b){var c=new z.MA(2,z.WC[0][3]);c.w(b);var d=z.N("zm-avatar-editor-preview");z.H(c,"beforepost",function(){(0,window.$)("\x3cdiv class\x3d'avatar-edit-preview-loading topic'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e").appendTo(d.parentNode)});z.H(c,"success",function(){window.$.post("/topic/"+z.WC[0][1]+"/avatar",{avatar_path:c.getData().url}).then(function(a){a&&a.r?
z.U(a.msg):d&&(d.src=c.getData().url)}).always(function(){(0,window.$)(".avatar-edit-preview-loading").remove()})});a.v().g(c,"beforeopen",z.rb(z.nB({Mp:!0}),z.Zn(z.p,!0)))}}};var BG=function(a){CG(a);DG(a);a.Wa&&a.v().g(a.Wa,"afterload",function(b){z.Y.Aa({type:"ga_click_topic_more",data:b.data,target:a.Wa.$b})})};
var CG=function(a){var b=z.L("zh-topic-feed-list");if(b){var c=new z.Nu;a.L(c);c.use("locationSource",{Qs:0,offset:function(a){return z.vb(a).getAttribute("data-score")}});c.use("childConstructor",{factory:z.eA}).use("expandLimit");c.w(b);a.v().g(c,"click!",function(a){"comment"===a.namespace&&a.Lc.fill("category",this.Vg).fill("label","topic_activity")})}};
var DG=function(a){var b=z.L("zh-topic-top-page-list");if(b){var c=new z.Nu({ag:!1});a.L(c);c.use("childConstructor",{factory:z.eA}).use("expandLimit");c.w(b);a.v().g(c,"click!",function(a){"comment"===a.namespace&&a.Lc.fill("category",this.Vg).fill("label","topic_activity")})}};
var EG=function(a){function b(a){a&&a.msg&&z.U(a.msg)}a.ts=z.L("zh-topic-info-add");a.ts&&a.v().g(a.ts,"submit",a.VQ);a.CF=z.N("zm-topic-info-content-main",a.h);a.CF&&a.v().g(a.CF,"click",a.TQ);(0,window.$)("#zh-topic-manage-info-form").on("change",'input[type\x3d"radio"]',function(){window.$.post("/topic/"+z.WC[0][1]+"/information/manage",{info:(0,window.$)(this).val(),action:"change"}).done(b)});(0,window.$)("#zh-topic-manage-relation-form").on("change",'input[type\x3d"radio"]',function(){window.$.post("/topic/update",
{action:"set_topic_weaknode",topic_id:z.WC[0][3],weak:(0,window.$)(this).val()}).done(b)});(0,window.$)("#zh-topic-manage-lock-form").on("change",'[type\x3d"checkbox"]',function(){window.$.post("/topic/lock",{url_token:z.WC[0][1],lock_type:this.name,lock_value:(0,window.$)(this).is(":checked")?1:0}).done(b)})};var FG=function(a){z.S.call(this,a)};
var GG=function(a,b,c){var d,f,g=[];for(d in c)f=c[d],z.ia(f)?z.A(f,(0,z.q)(function(a){g.push(YF({type:"hidden",name:d,value:String(a)}))},a)):g.push(YF({type:"hidden",name:d,value:String(f)}));z.qf(b,TF(g))};var HG=function(a){return window.$.get("/node/ExploreAnswerListV2",{params:JSON.stringify({offset:a,type:"day"})})};var IG=function(a){return window.$.get("/node/ExploreHotFavlistsInnerV2",{params:JSON.stringify({offset:a})})};
var JG=function(a){return window.$.get("/node/ExploreAnswerListV2",{params:JSON.stringify({offset:a,type:"month"})})};var KG=function(){z.J.call(this)};var LG=function(){z.S.call(this);var a=z.ly||[0,0];this.Ps=a[0];this.visible=!!a[1];this.Vg="collection"};
var MG=function(a){var b=z.L("zh-list-answer-wrap");if(b){(0,window.$)(b).on("click","a[name\x3dunfavo]",window.$.proxy(a.pO,a));var c=new z.Nu({ag:!1});a.L(c);c.use("childConstructor",{Sk:z.Xz}).use("expandLimit");c.w(b);a.v().g(c,"click!",function(a){"comment"===a.namespace&&a.Lc.fill("category",this.Vg).fill("label","collection_answer")})}};
var NG=function(a){var b=z.L("zh-list-side-head");if(b){var c=z.N("zu-entry-focus-button",b);c&&a.v().g(c,"click",function(){(0,z.EC)(c,"favlist","",["zg-btn-green","zg-btn-white"])});a.Sf=z.L("zh-list-operation-menu");a.Sf&&a.v().g(a.Sf,"click",a.FA)}(b=z.L("zh-single-answer-author-info"))&&(new mG(b)).init();(b=z.L("zh-list-create-new-list"))&&a.v().g(b,"click",a.JT);(b=z.L("zh-fav-list-side-bar-creator"))&&(new mG(b)).init();(b=z.L("zh-fav-list-side-bar-report"))&&z.xv(new z.uv("favlist",a.Ps),
b)};var OG=function(a){z.Gj("删除收藏夹","你确定要删除这个收藏夹吗？",function(a){a&&(a=new z.wo,a.add("favlist_id",this.Ps),a.add("_xsrf",(new z.vh(window.document)).get("_xsrf")),(new FG).post(LF(a),"/collection/delete"))},a)};var PG=function(a){a.ra||(a.ra=new z.$w(a.Ps,"favlist"),a.L(a.ra),a.v().g(a.ra,"click!",function(a){"comment"===a.namespace&&(a.Lc.fill("category",this.Vg).fill("label","collection"),a.Lc.action=a.Lc.action.replace("favlist","collection"))}),z.cx(a.ra,a.Kb,(0,window.$)(".toggle-comment",a.Kb)[0]))};
var QG=function(a){a.nJ=new z.V(!0);a.v().g(a.nJ,"complete",function(){window.location.reload()});a.nJ.ajax("/collection/update","favlist_id\x3d"+a.Ps+"\x26is_public\x3d1")};var RG=function(a,b){z.J.call(this);this.ma=a;this.Db=b;this.data=z.Uj};var SG=function(a){a.ot&&a.ot.ia(a.data.lb?"撤消匿名身份":"使用匿名身份")};var TG=function(a,b){return a?b?new z.Ux(a):new z.Yu(a):new z.bv};
var UG=function(a){a.hm.innerHTML="";z.R(a.hm,!1);a.uo=!1;a.Zl.kp("问题重定向");z.Mj("/question/unredirect",null,"POST","qid\x3d"+a.ma+"\x26rqid\x3d"+a.Nt)};var VG=function(a,b){z.S.call(this);this.vS=a;this.zC=b};var WG=function(a,b,c,d,f){z.Mr.call(this,d,b,c);this.ma=a;this.vy=this.bp=!1;this.RR=f};var XG=function(a,b){a.vy=b};
var YG=function(){var a=z.O("select",{style:"1px solid #999 "}),b=z.O("option",{value:"none"},"请选择一个修改理由...");a.appendChild(b);z.A(ZG,function(b,d){var f=z.O("option",{value:b.value},d+1+". "+b.label);a.appendChild(f)});return a};var $G=function(a,b,c){a.GG.innerHTML=b;z.T.set(a.GG,c||"zg-error-text")};var aH=function(){z.S.call(this)};var bH=function(){z.Aj.call(this);this.Df=!0;this.F(!0)};
var cH=function(a,b){a.eb("提问无人问津？");a.ia(b);a.da();(0,window.$)(".js-gonext",a.h).on("click",function(){var b=(0,window.$)(this).parents('[class^\x3d"view"]').attr("class");"view-starting"===b?(a.eb("第一条"),dH(a,"firsttip")):"view-firsttip"===b?(a.eb("第二条"),dH(a,"secondtip")):"view-secondtip"===b?(a.eb("第三条"),dH(a,"thirdtip")):"view-thirdtip"===b&&a.F(!1)})};var eH=function(a,b){a.eb("邀请回答小窍门");a.ia(b);a.da();(0,window.$)(".js-close",a.h).on("click",function(){a.F(!1)})};
var dH=function(a,b){(0,window.$)('[class^\x3d"view"]',a.h).hide();(0,window.$)(".view-"+b,a.h).show()};var fH=function(a,b){z.S.call(this);this.uS=a;this.To=b;this.ba=null;this.Hb=!1;this.Il=null;this.yj=[];this.wc=!1;this.TP="loading";this.MF="zg-btn-white"};
var gH=function(a){var b=a.TP;a.K.addClass(b).html(hH);window.$.get("/node/QuestionInvitePanelV2",{params:{question_id:a.uS}}).done(function(c){a.wc=!0;a.K.removeClass(b);c=(0,window.$)(c);a.K.replaceWith(c);a.h=c[0];c.toggle(a.vc());a.K=c;iH(a)})};
var iH=function(a){var b=a.m();a.v().g(z.Wj,"anon_change",a.xQ);(0,window.$)(".cancel-anon",b).click(window.$.proxy(a.jN,a));if(!(0,window.$)(".error-message",b).length){var c=z.N("search-input",b),d=z.N("invite-title",b);a.cy(c,d);a.Ru=(0,window.$)(".suggest-persons",b);a.Ru.on("click","button",window.$.proxy(a.VE,a));(0,window.$)(".js-more",b).one("click",function(){(0,window.$)(".person",this.Ru).show();(0,window.$)(this).remove()});a.cq=(0,window.$)(".invite-status",b);a.cq.on("click","button",
window.$.proxy(a.kN,a)).on("mouseenter mouseleave",".invited-shortlist",function(a){(0,window.$)(".invited-hovercard",this).toggleClass("in","mouseenter"===a.type)});jH(a)}};var kH=function(a,b){var c=z.Uj;a.dispatchEvent(new z.Dw("click!invitation",{category:"invitation",action:"ask_to_answer",label:b,value:c.TF?null:c.oe}))};var lH=function(a,b){return!!z.Db(a.yj,function(a){return a.id===b})};
var mH=function(a,b,c){var d=(0,window.$)(".invite-button",a.Ru).filter(function(){return this.getAttribute("data-uid")===b}).get(0);d&&nH(a,d,c)};var nH=function(a,b,c){a=a.MF;c?(z.T.add(b,a),z.ig(b,"收回邀请")):(z.T.remove(b,a),z.ig(b,"邀请回答"))};var jH=function(a){a.yj=window.$.map((0,window.$)(".invited-fulllist",a.cq).children(),a.AH)};var oH=function(a,b){a.yj&&eG(a.yj,function(a){return a.id===b})&&pH(a)};
var pH=function(a){var b=a.yj,c={each:z.A,fullList:function(){return(0,z.Wr)(qH,{persons:b,helper:c})}};b.length?a.cq.html((0,z.Wr)(rH,{persons:b,helper:c,maxInvites:15})):a.cq.html("你可以通过邀请其他用户来更快获得回答")};var sH=function(a){z.S.call(this);this.data=a;this.ra=null};var tH=function(a){var b=z.N("panel-container",a.h);b&&(a.Sl=new aH,a.L(a.Sl),a.Sl.w(b),a.ra=new z.$w(a.data.ma,"question"),a.Sl.L(a.ra),z.cx(a.ra,a.Sl.m(),(0,window.$)(".toggle-comment",a.h)[0]),a.uj(),a.vj(),uH(a))};
var uH=function(a){if("normal"===z.Uj.status){var b=new fH(a.data.ma,a.data.jb);b.ga(a.Sl.m());var c=(0,window.$)('a[name\x3d"invite"]',a.m());a.v().g(b,["expand","collapse"],function(a){c.text("expand"===a.type?"收起邀请":"邀请回答")});a.Sl.L(b);z.Uj.MT&&(b.td(!0),a.dispatchEvent(new z.Dw("show!invitation",{category:"invitation",action:"ask_to_answer_card",label:""})));a.py=b}};
var vH=function(a,b){var c=a.pK;c||(c=new z.Xx,c.w(z.L("zh-question-admin-menu")),z.$i(c,function(a){a.Ga(a.m().getAttribute("data-action"))}),a.v().g(c,"action",function(a){a=this.lC=a.target;(new z.Fw).open(a.m(),{id:this.data.ma,type:"question"},(0,z.q)(this.PL,this))}),a.pK=c);c.U()?c.F(!1):z.Yx(c,new z.ev(b,1,!0),0,new z.Qh(5,0,5,0))};
var wH=function(a){z.Gj("删除问题","你确定要删除这个问题吗？相关的评论也将被删除。",function(a){if(a){var c=new z.V(!0);z.H(c,"complete",function(){var a=z.cf(c);a&&!a.r?window.location.href="/":z.U(a.msg)});c.ajax("/question/delete/"+this.data.ma)}},a)};var xH=function(a){z.uz.call(this,a)};var yH=function(a){z.J.call(this);this.Bz=a;this.K=(0,window.$)(this.Bz.html);this.Vi=this.K[0];this.position=this.Bz.position||"top"};
var zH=function(a){a=a.getBoundingClientRect();a.width||(a.width=a.right-a.left,a.height=a.bottom-a.top);return a};
var AH=function(){function a(){(0,window.setTimeout)(function(){b.vo&&b.da()})}if(z.Ak.is_registered_via_web&&!z.Ak.is_answerer_prompt_dismissed){var b,c;z.uE.g("expand",function(d){var f=d.target;if(f instanceof z.Xz){if(b)return a();c&&"pending"===c.state()||(c=window.$.post("/node/Guide2",{method:"unfold_answer_in_feed"}).then(function(a){(a=(0,window.$)(a.msg).html())&&(b=BH(a,f))}))}});z.uE.g("collapse",function(c){c.target instanceof z.Xz&&b&&a()})}};
var CH=function(a){var b=(0,window.$)("#tmpl-guidev2-answerer-tip").html();b&&BH(b,a)};
var BH=function(a,b){var c=new yH({html:a}),d=(0,window.$)(b.m()).find(".zm-item-answer-author-info .author-link"),f=z.sa(z.X,"popup_guide");if(d.length)return c.g("show",function(){function a(){b.Jr()===c.target&&c.hide("hoverUserCard")}var b=z.Vt.W().V,c=this;b&&(b.g("beforeshow",a),c.wa("hide",function(){b.qa("beforeshow",a)}))}),c.g("show",function(){window.$.post("/node/Guide2",{method:"dismiss_answerer_prompt"});f("popup_guide_view_people_appear","popup_guide_view_people_appear")}),c.g("hide",
function(a){function b(a){f(a,"popup_guide_view_people_fade")}switch(a.reason){case "click":b("click_popup_guide_view_people_close");break;case "outOfView":b("move_out_popup_guide_view_people")}b("popup_guide_view_people_fade")}),c.show(d),c};var DH=function(){z.S.call(this);this.data=z.Uj||{};this.ma=this.data.ma;this.uo=!1;this.Ji={};this.rv=[];this.vq=[];this.ii=0;this.Qj=z.VC&&z.VC.url_token?z.VC:null};
var EH=function(a){z.Z.Yg&&window.$.post("/question/popup",{action:"no_answer",question_token:a.data.jb},function(a){a&&cH(new bH,a)})};
var FH=function(a){(0,window.$)(".js-ignore-invite").click(function(){(0,window.$)(".question-invited-by").hide();window.$.post("/question/askpeople",{qid:a.data.jb,uid:z.Z.kf,op:"pass"})});(0,window.$)(".js-invite-others").click(window.$.proxy(function(){var a=(0,window.$)('#zh-question-meta-wrap a[name\x3d"invite"]')[0];a&&(z.Do(a,{DB:function(){return!1},ov:!0}),this.Vz.py.td(!0))},a))};
var GH=function(a){"close"!==z.Uj.status&&(a.Ka=new z.Ap(a.data.Cm,a.data.ma),a.Ka.Ys=5,a.Ka.bt=1,a.Ka.nC=!0,a.Ka.ht=!0,a.Ka.w(z.N("zm-tag-editor",a.h)),a.v().g(a.Ka,["remove_tag","add_tag"],function(){z.Y.Aa("ga_edit_question_topic_changed")}),a.v().g(a.Ka,"start_editing",function(){z.Y.Aa("ga_question_topic_edit_finish_changed")}),a.Ka.addEventListener("beforeedit",z.nB({fm:!0})))};
var HH=function(a){var b=z.L("zh-question-title");"false"!==b.getAttribute("data-editable")&&(a.ad=new WG(a.data.ma,"/question/title","content",!1,!0),a.ad.MD=!0,a.ad.Ed=!0,a.ad.bp=!0,XG(a.ad,XF(a.data.Yg)),a.ad.w(b),a.v().g(a.ad,"change",function(){z.Wj.dispatchEvent("question_title_change");window.document.title=this.ad.bb()+" - 知乎"}),a.v().g(a.ad,"click_edit",function(){z.Y.Aa("ga_question_title_edit_start")}),a.v().g(a.ad,"cancel_edit",function(){z.Y.Aa("ga_question_title_edit_cancel")}),a.v().g(a.ad,
"save_changed",function(){z.Y.Aa("ga_question_title_edit_save_changed")}),a.v().g(a.ad,"save_unchanged",function(){z.Y.Aa("ga_question_title_edit_save_unchanged")}),a.ad.addEventListener("beforeedit",z.nB({fm:!0})))};var IH=function(a,b){z.Z.Ca()&&b?(JH(a,"zh-question-detail",a.OO),JH(a,"zh-question-answer-summary",a.RO)):(JH(a,"zh-question-detail",z.p),JH(a,"zh-question-answer-summary",z.p))};var JH=function(a,b,c){if(b=z.L(b)){var d=new z.pz;a.v().g(d,"expand",c).g(d,"invalid",c);d.w(b)}};
var KH=function(a){a.data.Tq=+a.FL.innerHTML;z.Z.Ca()||(a.data.Tq=0);z.R(a.Jh,0<a.data.Tq);a.wq&&z.ig(a.wq,a.data.oe?a.data.oe+" 个回答":"还没有回答");a.ym&&z.R(a.ym,1<a.data.oe);z.R(a.Jh,0<a.data.Tq)};
var LH=function(a){var b=z.L("zh-question-answer-wrap");if(b){var c=new z.Nu({use:["expandLimit","nodeSource"],ag:a.data.oe>a.data.XR&&!z.N("question-page-pager")});a.L(c);a.v().g(c,"itemcreated",function(a){c.L(MH(this,a.item));(0,window.$)("img.lazy",a.item).lazyload({data_attribute:"actualsrc",threshold:400})});c.w(b)}};
var MH=function(a,b,c){var d=new xH({ma:a.ma});d.w(b);a.Ji[d.pa]=d;a.vq.push(d.pa);a.v().g(d,"change",a.lz);d.Ee&&(a.ii=d.pa,d.SK=z.Z,a.v().g(d.ne,"change",a.WN),a.IK=d);d.zj?d.Ee&&a.en.appendChild(d.m()):a.rv.push({added_time:d.bw,vote:c,aid:d.pa});d.di&&z.R(d.m(),!1);return d};
var NH=function(a){var b=null,c=null,d,f={suggest:"建议修改",evaluate:"建议修改",close:"关闭"};z.TC.Od||"normal"===z.Uj.status||(c="被"+f[z.Uj.status]+'的问题不允许添加新的回答。\x3ca data-tip\x3d"s$b$为什么部分问题会被「关闭」「建议修改」？" href\x3d"//www.zhihu.com/question/21290061 "\x3e\x3ci class\x3d"zg-icon zg-icon-question-mark"\x3e\x3c/i\x3e\x3c/a\x3e');a.ii?(d=a.Ji[a.ii],b="#answer-"+d.pa,d=d.di):a.Qj&&(b="/question/"+z.Uj.jb+"/answer/"+a.Qj.url_token,d=a.Qj.is_delete);b&&(c=d?'你已经删除了对该问题的回答，如果需要修改，请先 \x3ca href\x3d"javascript:;" name\x3d"cancel_delete"\x3e撤消删除\x3c/a\x3e':
'一个问题你只能回答一次，但你可以对 \x3ca href\x3d"'+b+'"\x3e现有的回答\x3c/a\x3e 进行修改');!z.Z.Yg||a.ii||a.Qj||(c='添加回答：\x3ca href\x3d"javascript:;" name\x3d"answer_my_question"\x3e回答自己的提问\x3c/a\x3e');a.data.uy&&(c='该问题目前已经被锁定，无法添加新答案。\x3ca href\x3d"/question/19604313" target\x3d"_blank"\x3e问题为什么会被锁定？\x3c/a\x3e');c&&a.ub.Xa(!1,c)};
var OH=function(a){a.wq=z.L("zh-question-answer-num");a.xq=z.L("zh-question-answer-wrap");a.Jh=z.L("zh-question-collapsed-link");a.en=z.L("zh-question-collapsed-wrap");a.FL=z.L("zh-question-collapsed-num");a.HK=z.L("zh-question-answer-form-wrap");a.mk=z.L("zh-question-notification-summary");a.ym=z.L("zh-answers-filter");a.Bt=z.L("zh-add-question-sug");a.wq&&(a.data.oe=+a.wq.getAttribute("data-num"));a.xq&&(a.data.XR=+a.xq.getAttribute("data-pagesize"));a.Jh&&a.v().g(a.Jh,"click",a.$T);a.Bt&&a.v().g(a.Bt,
"click",a.SE);a.ym&&z.mD&&a.v().g(a.ym,"click",function(a){a.stopPropagation();z.T.add(this.ym,"activated");this.v().wa(window.document,"click",function(){z.T.remove(this.ym,"activated")})})};var PH=function(a,b){var c=z.L("zh-question-collapsed-switcher");b?(c.name="collap",a.fD=!0,z.R(a.en,!0),z.T.add(a.Jh,"zu-question-collap-title-active")):(a.fD=!1,c.name="expand",z.R(a.en,!1),z.T.remove(a.Jh,"zu-question-collap-title-active"))};
var QH=function(a){a.HL=!0;var b=a.en,c=window.$.get("/node/QuestionCollapsedAnswerListV2",{params:{question_id:a.data.ma}});c.done(function(c){c=z.Lf(c);PH(a,!0);z.T.remove(b,"zm-question-collapsed-list-loading");b.appendChild(c);z.A(z.Vf(b),function(b){b!==d&&MH(a,b,99999)});(0,window.$)("img.lazy",b).lazyload({data_attribute:"actualsrc",threshold:400})});var d=z.Vf(b)[0];d&&(z.R(d,!1),c.done(function(){z.R(d,!0)}));z.R(b,!0);z.T.add(b,"zm-question-collapsed-list-loading")};
var RH=function(a){var b=z.Z[4];z.dy&&z.dy.length&&(b=z.dy[0][1]);a.ub=new z.Vy(a.data.lb,z.Z,b);a.L(a.ub);a.ub.w(a.HK);z.TC.Od&&z.TC.Od.length?a.ub.ia(z.TC.Od[0]):!z.Ax.mb&&z.C&&a.ub.ia("\x3cp\x3e\x3c/p\x3e");if(!(a.data.uy||a.ii||a.Qj&&a.Qj.url_token))if(a.data.Pm&&a.data.Pm.length&&a.data.Pm[3]!==z.Z.kf)a.ub.Xa(!1,"只有 "+z.go(a.data.Pm)+" 能回答此问题");else if("normal"===z.Uj.status||z.TC.Od)z.Z.Yg||a.ub.qf();a.v().g(a.ub,"change",a.wQ);a.v().g(a.ub,"cancel_delete_answer",a.FQ);a.ub.ready(function(){var a=
this.gx();a&&"writing"===window.location.hash.slice(1)&&a.execCommand("toggleFullScreen")})};var SH=function(a,b){if(b=b||window.location.hash.slice(1)){var c=b.split("-"),d=c[1];"answer"===c[0]&&(c=a.zE(d))&&(c.zj&&!a.fD?TH(a,a.Jh):(TH(a,c.m()),UH(c)))}};var TH=function(a,b){if(b){var c=z.Ei(window.document.body).top,d=a.wO?z.si(a.mk).height:0,c={paddingTop:c+d};"number"===window.$.type(c)&&(c={offsetTop:c});c.DB=UF;z.Do(b,c);z.oo(b);a.cj&&a.cj.Rp()}};
var VH=function(){DH.call(this);this.data=z.Uj;this.ma=this.data.ma};var WH=function(a){var b=(0,window.$)(".awesome-answer-list").get(0);if(b){var c=new z.Nu({use:["expandLimit"],ag:!1});a.L(c);a.v().g(c,"itemcreated",function(a){var b=new z.Xz;b.w(a.item);c.L(b)});c.w(b)}};
var XH=function(a,b){var c=(0,window.$)("#js-sidebar-author-info");if(!(0,window.$)("a[name\x3dfocus]",c).length){var d={0:"fullname",1:"url_token",2:"avatar_path",3:"hash",4:"headline"},f=z.zb(z.Z,function(a,b,c){a[d[c]]=b;return a},{}),f=(0,z.Wr)(a.TK,{author:!b&&f});c.html(f)}};var YH=function(){var a=(0,window.$)("#zh-question-answer-collestions");a.length&&(0,window.$)("a[name\x3dfocus]",a).click(function(){(0,z.EC)(this,"favlist")})};
var $H=function(a){a.Db?a.Db.di?(a.pr.innerHTML=a.Db.Ee?'你已经删除了对该问题的回答，如果需要修改，请先 \x3ca href\x3d"javascript:;" name\x3d"cancel_delete"\x3e撤消删除\x3c/a\x3e':"此答案已经被作者删除",z.R(a.Db.m(),!1)):z.R(a.Db.m(),!0):a.pr.innerHTML="此答案已经被作者删除"};var aI=function(){z.S.call(this);this.page=1};var bI=function(a,b){z.ig(a,b?"加载中...":"更多")};var cI=function(a,b){window.$.each(b,function(b,d){var f=new dI;a.L(f);f.w((0,window.$)(d)[0]);a.MB.append(f.m());a.v().g(f,"unfollow",function(){eI(a)})})};
var fI=function(a){function b(a){g.hasClass("disabled")||(h.random(a)||(g.addClass("disabled"),(0,window.$)(".hidden-topics-plaza").show(),z.X("topic","show_hidden_enter_topics_square","topic_feed_recommend")),d.html(z.Qx(h,h.Qd,h.Vf)))}var c=(0,window.$)(a.m()),d=(0,window.$)(".js-list",c),f=(0,window.$)(".js-hidden-list",c),g=(0,window.$)(".js-pager",c),f=window.$.makeArray((0,window.$)("\x3cdiv\x3e").html(f.html()).children().add(d.children())),h=new z.Px(f,3);g.on("click",function(){b(d.find(".zg-btn-follow").length)});
d.on("click","[data-follow]",function(c){var f=(0,window.$)(c.target),n=f.data("id"),t=(0,window.$)(".new-follow-topics span"),y=t.data("ids");if(f.hasClass("zg-btn-follow"))c=(0,window.$)(c.target).closest(".topic-item"),h.remove(c[0]),t.length?(y.push(n),t.data("ids",y),t.text(y.length)):(0,window.$)('\x3ca href\x3d"#" class\x3d"new-follow-topics"\x3e新关注 \x3cspan data-ids\x3d"['+n+']"\x3e1\x3c/span\x3e 个话题，点击查看\x3c/a\x3e').insertBefore((0,window.$)(".topic-recommend")),1===(0,window.$)(".zg-btn-follow",
d).length&&(g.hasClass("disabled")?(0,window.$)(".topic-recommend").fadeOut():(0,window.setTimeout)(function(){b(0)})),gI(a);else if(f.hasClass("zg-btn-unfollow")){var G=(0,window.$)(".js-topic-item[data-id\x3d"+n+"]");G.length?G.fadeOut(function(){G.remove();eI(a)}):y&&(1<y.length?(y.splice(y.indexOf(n),1),t.data("ids",y),t.text(y.length)):t.parent().remove(),eI(a))}});c.on("click",".new-follow-topics",function(b){b.preventDefault();var c=(0,window.$)(b.target);window.$.get("/topic/newest-feeds",
{ids:JSON.stringify((0,window.$)("span",c).data("ids"))},function(b){b&&!b.r&&(cI(a,b.msg),c.remove())})}).on("click",".js-nomore-recommend",function(){window.$.post("/topic/suggest-topics/close",function(a){a&&!a.r&&(0,window.$)(".topic-recommend").fadeOut()})})};var gI=function(a){var b=(0,window.parseInt)(a.Iu.text());hI(a,b+1)};var eI=function(a){var b=(0,window.parseInt)(a.Iu.text());hI(a,b-1)};var hI=function(a,b){a.Iu.text(b);(0,window.$)(".no-topics").toggle(0===b)};var dI=function(){z.S.call(this)};
var iI=function(){z.S.call(this)};var jI=function(a){a.Ef&&a.Ef.H();var b=new z.Zo;b.ur=(0,z.x)("pin-topic-moving").split(" ");z.$o(b,a.h,0);b.init();a.v().g(b,"dragend",(0,z.q)(a.gu,a));a.Ef=b;(0,window.$)("a",a.h).each(function(){a.v().g(this,"mousedown",function(a){a.stopPropagation()})})};var kI=function(a,b){return(0,window.$)(a.h).find("[data-topicid\x3d"+b+"]")};
var lI=function(a,b){return window.$.post("/pin-topic/add",{tid:b},window.$.proxy(function(a){!a.r&&a.msg?((0,window.$)(this.h).append((0,window.$)(this.QS({topic:a.msg})).hide().fadeIn()),jI(this)):z.U(a.msg)},a))};var mI=function(a,b,c){var d=kI(a,b);d.fadeOut(function(){d.remove();a.gu().done(function(a){c&&c(a)});a.dispatchEvent({type:"change",ZI:d.attr("data-topicid")});0===(0,window.$)(".js-pin-item").length&&(0,window.$)(".no-pin-topics").show()})};var nI=function(){z.S.call(this)};
var oI=function(){z.S.call(this)};var pI=function(a,b){var c;if(a&&b){c=c||"text-highlight";var d=new RegExp(b,"i");(0,window.$)(a).find("*").andSelf().contents().each(function(){if(3===this.nodeType){var a=this,g=a.parentNode;if(!z.T.has(g,c))for(var h,k;-1!==(h=a.data.search(d));)h=0<h?a.splitText(h):a,a=h.splitText(b.length),k=window.document.createElement("em"),k.className=c,k.appendChild(h.cloneNode()),g.replaceChild(k,h)}})}};var qI=function(){z.S.call(this);this.nA=z.Ak.searchKeyword};
var rI=function(){var a=(0,window.$)("#js-search-question-form");a.length&&a.submit(function(b){b.preventDefault();b=z.Tr.W();b.show();z.Ur(b,(0,window.$)(".title-input",a).val())})};var sI=function(a){var b=(0,window.encodeURIComponent)(a.nA);(0,window.$)("ul.list[data-paging]").on("click",".item a[href!\x3d#]",function(a){a=a.currentTarget;a.host&&(a=(0,window.$)(a).closest(".item").index()+1,z.pl.set("s-q",b),z.pl.set("s-i",a),z.pl.set("sid",(0,z.MD)()))})};
var tI=function(a){function b(a,b){var h=(0,window.$)(a);window.$.each(b(),function(a,b){h.on("click",a,function(a){d.apply(null,c(b,a))})})}function c(a,b){return z.yb(a,function(a){return z.la(a)?a(b):a})}var d=z.sa(z.X,"search");b(".related-topics",function(){return{"a.avatar-link":["visit_topic","search_result_card_topic_avatar"],"a.name-link":["visit_topic","search_result_card_topic"],"a[href$\x3dquestions]":["visit_topic_questions","search_result_card_topic"],"a[href$\x3dtop-answers]":["visit_topic_topanswers",
"search_result_card_topic"],"a[href$\x3dfollowers]":["visit_topic_followers","search_result_card_topic"],"button.zg-btn-follow":["click_follow_topic","search_result_card_topic"],"button.zg-btn-unfollow":["click_unfollow_topic","search_result_card_topic"],'a[href^\x3d"/search?"]':["click_search_result_more","search_result_card_topic"]}});b(".related-users",function(){return{"a.avatar-link":["visit_people_profile","search_result_card_people_avatar"],"a.name-link":["visit_people_profile","search_result_card_people"],
"a[href$\x3danswers]":["visit_people_answers","search_result_card_people"],"a[href$\x3dfollowers]":["visit_people_followers","search_result_card_people"],"a[href$\x3dposts]":["visit_people_posts","search_result_card_people"],"button.zg-btn-follow":["click_follow_people","search_result_card_people"],"button.zg-btn-unfollow":["click_unfollow_people","search_result_card_people"],'a[href^\x3d"/search?"]':["click_search_result_more","search_result_card_people"]}});b(window.document.body,function(){var a=
z.sa(z.Fa,"search_result_%s_more_button");return{"ul.list.questions + .zu-button-more":["click_search_result_more",a("all")],"ul.list.users + .zu-button-more":["click_search_result_more",a("user")],"ul.list.topics + .zu-button-more":["click_search_result_more",a("topic")]}});b(".search-tabs",function(){var a=z.sa(z.Fa,"search_result_tab_%s");return{'a[href^\x3d"/search?type\x3dquestion"]':["click_search_result_tab",a("all")],'a[href^\x3d"/search?type\x3dpeople"]':["click_search_result_tab",a("user")],
'a[href^\x3d"/search?type\x3dtopic"]':["click_search_result_tab",a("topic")]}});b(".range-selector",function(){var a=z.sa(z.Fa,"search_result_range_%s");return{'a[href*\x3d"range\x3d1d"]':["click_search_result_range",a("1d")],'a[href*\x3d"range\x3d1w"]':["click_search_result_range",a("1w")],'a[href*\x3d"range\x3d3m"]':["click_search_result_range",a("3m")]}});b("ul.list.questions",function(){function a(){return function(a){return"search_result_all_list_"+((0,window.$)(a.target).closest(".item").index()+
1)+""}}return{"a.question-link":["visit_question",a()],".js-expand, .summary":["click_expand",a()],'a[name\x3d"collapse"]':["click_collapse_answer",a()],"a.zg-follow":["click_follow_question",a()],"a.zg-unfollow":["click_unfollow_question",a()]}});b("ul.list.users",function(){function a(b){return function(a){return"search_result_user_list_"+((0,window.$)(a.target).closest(".item").index()+1)+(b||"")}}return{"a.avatar-link":["visit_people_profile",a("_avatar")],"a.name-link":["visit_people_profile",
a()],"a[href$\x3danswers]":["visit_people_answers",a()],"a[href$\x3dfollowers]":["visit_people_followers",a()],"a[href$\x3dposts]":["visit_people_posts",a()],"button.zg-btn-follow":["click_follow_people",a()],"button.zg-btn-unfollow":["click_unfollow_people",a()]}});b("ul.list.topics",function(){function a(b){return function(a){return"search_result_topic_list_"+((0,window.$)(a.target).closest(".item").index()+1)+(b||"")}}return{"a.avatar-link":["visit_topic",a("_avatar")],"a.name-link":["visit_topic",
a()],"a[href$\x3dquestions]":["visit_topic_questions",a()],"a[href$\x3dfollowers]":["visit_topic_followers",a()],"button.zg-btn-follow":["click_follow_topic",a()],"button.zg-btn-unfollow":["click_unfollow_topic",a()]}});a.v().g(a,"click!",function(a){"comment"===a.namespace&&a.Lc.fill("category","search").fill("label","search_result_answer")})};var uI=function(a){vI||(this.Dn=a,this.vh=(0,window.$)(this.Dn.m()),(0,window.setTimeout)((0,z.q)(this.Bb,this)))};
var wI=function(a){(0,window.setTimeout)(function(){window.$.ajax({type:"POST",url:"/zreactor/deliver",data:JSON.stringify(a),contentType:"application/json",processData:!1})},50)};
var xI=function(a){var b=yI[a.vh.data("type")];z.xk(a.vh[0],function(){zI(a,"display")},a.Dn);a.Dn.v().g(a.Dn,"expand",function(c){c.target instanceof z.Hx&&zI(a,"expand_"+b)}).g(a.Dn,"collapse",function(c){c.target instanceof z.Hx&&zI(a,"collapse_"+b)});a.vh.on("click",'a[name\x3d"nohelp"]',function(){var b=!!(0,window.$)(this).data("revert");zI(a,b?"unhelpful":"revert_unhelpful");(0,window.$)(this).data("revert",!b)});window.$.each({".actioncard-body .more":"view_all",".actioncard-body .next:not(.disabled)":"next_page",
".actioncard-body .prev:not(.disabled)":"prev_page",".actioncard-body .items a":"open_topic",'.zg-follow[data-follow^\x3d"t:"], .zg-btn-follow[data-follow^\x3d"t:"]':"follow_topic",'.zg-unfollow[data-follow^\x3d"t:"], .zg-btn-unfollow[data-follow^\x3d"t:"]':"unfollow_topic",'a.zg-follow:not([data-follow^\x3d"t:"]):not([data-follow^\x3d"m:"])':"follow_"+AI[b],'a.zg-unfollow:not([data-follow^\x3d"t:"]):not([data-follow^\x3d"m:"])':"unfollow_"+AI[b],"a.toggle-comment":"expand_comments",'a[name\x3d"addnew"]':"comment",
".content h2 a":"open_"+BI[b],"a.ignore:not(.close)":"uninterest","a.revert":"revert_uninterest","a.ignore.close":"confirm_uninterest","button.up.pressed":"vote_up_"+b,"button.down.pressed":"vote_down_"+b,"button.up:not(.pressed)":"revert_vote_up_"+b,"button.down:not(.pressed)":"revert_vote_down_"+b,'a[name\x3d"favo"]':"collect_answer",'a[name\x3d"thanks"]':"thanks",'a[name\x3d"share"]':"share",'a[name\x3d"report"], .js-report':"report","a.answer-date-link":"open_answer"},function(b,d){a.vh.on("click",
b,function(){zI(a,d)})})};var zI=function(a,b){var c=window.$.extend({},CI(a),{action_type:b,time:(0,z.w)()});c.object_id&&("display"===b?a.hS(c):wI(c))};var CI=function(a){var b=a.QB,c=window.$.extend({},b.data("meta"),{create:a.vh.find(".source .time").data("timestamp"),offset:(0,window.$)(".feed-item").index(a.vh)+1});return{mid:z.Ak.ga_vars.user_hash,object_type:yI[a.vh.data("type")],object_id:b.data("id"),object_meta:c,context:DI,others:""}};var EI=function(a,b,c){z.Bv.call(this,a,b,c)};
var FI=function(a){z.$i(a,function(a){(0,window.$)(a.m()).remove()})};var GI=function(){this.interval=3E4};var HI=function(a,b){if(!a.$c||b)b&&(0,window.clearInterval)(a.$c),a.$c=(0,window.setInterval)((0,z.q)(function(){II(this)},a),a.interval)};var JI=function(){var a=GI.W();II(a,!0)};var II=function(a,b){(0,window.$)(".feed-item-hook .time").each(function(){(0,window.$)(this).text(z.io((0,window.$)(this).data("timestamp")))});b&&HI(a,b)};
var KI=function(){z.S.call(this);this.yy={};this.gt=[];this.oP="old"===(0,window.$)("#feed-ver").val();this.ZF=!!(0,window.$)("#is-topstory").length;this.AP=!!(0,window.$)("#is-topstory2").length;this.kE=this.oP?"zm-item":"feed-item-hook";window._gaq=window._gaq||[];this.ZF?window._gaq.push(["_setCustomVar",5,"is_topstory",!0,3]):window._gaq.push(["_setCustomVar",5,"is_topstory",!1,3])};
var LI=function(a){a.Wa=new EI(a.h,null,!0);if((0,window.$)(a.h).data("delayed"))z.Wj.on("guider2:topicselected",(0,z.q)(a.Wa.Ol,a.Wa));a.getParent()&&a.getParent().L(a.Wa);JF(a.Wa,"/node/"+(0,window.$)(a.h).data("init").nodename);a.Wa.ti("feed-item-hook");a.v().g(a.Wa,"itemcreated",function(a){MI(this,a.data.DP)}).g(a.Wa,"afterload",function(a){z.Y.Aa({type:"ga_click_feed_more",data:a.data})}).g(a.Wa,"ignore",function(a){NI(this,a.key,a.value)});a.Wa.init()};
var OI=function(a){a.K.on("click",".js-change-some",function(){z.yo("feed","intrests-change");var b=(0,window.$)(this),c=(0,window.$)(this).parent().parent();window.$.post("/node/HomeExtraFeedList",{method:"next",params:{}}).done(function(d){!d.r&&d.msg&&(0<d.msg.length?(c.find(".feed-item-hook").remove(),c.append(d.msg).find(".feed-item-hook").each(function(){a.Wa.Vj(this)})):b.replaceWith('\x3cspan class\x3d"zg-right zg-gray"\x3e没有更多内容了\x3c/span\x3e'))})})};
var PI=function(a){a.K.on("click",".js-more-similar",function(){(0,window.$)(this).parent().slideUp("fast").nextUntil(":not(.hidden)").slideDown("fast")})};var MI=function(a,b){var c=z.Si(z.Ri.W());a.yy[c]=b;(0,window.$)(b.h).attr("data-fid",c)};var NI=function(a,b,c){z.Sb(a.yy,function(a){a.yr[b]===c&&(0,window.$)(a.h).fadeOut(150)})};var QI=function(){z.J.call(this);this.Rx=[];this.HD=[]};
var RI=function(a){for(var b=[],c=0;3>c;c++){var d=a.HD.shift();d&&b.push(d)}3===b.length?(a.Us.innerHTML=b.join(""),SI(a)):TI(a)};var SI=function(a){var b=z.Af("suggest-item",a.Us);z.A(b,function(a){this.Rx.push(a.id.split("-")[1])},a)};var TI=function(a){a.Us.innerHTML='\x3cimg class\x3d"bubble-loading" src\x3d"'+z.Ax.UA+'/img/noti-loading.gif"\x3e';window.$.post("/lookup/suggest_member",{ids:a.Rx.join(",")}).done((0,z.q)(a.IQ,a))};var UI=function(){z.S.call(this)};
var VI=function(){var a=(0,window.$)("#js-global-notify");if(a.length){var b=new z.er;b.w(a[0]);KF(b);(0,window.$)(".zu-global-notify-close",a).click(function(){var c=(0,window.$)(this).data("id");window.$.post("/notice/read",{nid:c});b.H();a.remove()})}};
var WI=function(){var a=(0,window.$)(".user-guiding-box");0!==a.length&&((0,window.$)(".reactive-button",a).click(function(){(new z.rl).F(!0)}),(0,window.$)(".js-close-guidingbox",a).click(function(){a.remove();window.$.post("/node/HomeGuideV2",{method:"ignore_guiding_box"})}),(0,window.$)(".js-close-activationbox",a).click(function(){a.remove();window.$.post("/node/HomeGuideV2",{method:"ignore_activation_box"})}))};var XI=function(){z.S.call(this)};
var YI=function(){z.S.call(this);this.Vg="explore";this.FM="explore_feed"};
var ZI=function(a){var b=(0,window.$)("#js-explore-tab");if(b.length){var c=(0,window.$)(".tab-panel",b),d=(0,window.$)(".tab-nav",b),f=null;d.children().click(function(){f=z.Ef(window.document)});b=function(){var b={"daily-hot":0,"monthly-hot":1}[window.location.hash.slice(1)]||0;d.removeClass("active").eq(b).addClass("active");a.iy(c.hide().eq(b).show().children("[data-type]"));f&&window.scrollTo(f.x,f.y)};a.v().g(window,"hashchange",b);b()}};
var $I=function(a){var b=(0,window.$)("#zh-recommend-list-full\x3e.zh-general-list")[0];if(b){var c=new z.Nu;c.use("nodeSource");z.Ju(c,function(a){var b=z.eA(a);b&&(c.L(b),b.w(a))});a.L(c);c.w(b)}};
var aJ=function(){function a(a,b,c,d,m){c=(0,window.$)(c.target).closest(d,c.delegateTarget).index();z.qk(a,b,m,c+1)}var b=z.sa(a,"view_answer","visit_answer"),c=z.sa(a,"view_topic","visit_topic"),d=z.sa(a,"view_roundtable","visit_roundtable");(0,window.$)("#zh-recommend").on("click","a.question_link",function(a){b(a,".feed-item","editor_recommendations_question_title")});(0,window.$)('div[data-type\x3d"daily"]').on("click","a.question_link",function(a){b(a,".feed-item","daily_trending_question_title")});
(0,window.$)('div[data-type\x3d"monthly"]').on("click","a.question_link",function(a){b(a,".feed-item","monthly_trending_question_title")});(0,window.$)("ul.hot-topics").on("click",'a[href*\x3d"topic"]',function(a){c(a,"li","explore_sidebar_trending_topics_name")});(0,window.$)("ul.hot-roundtables").on("click",'a[href*\x3d"roundtable"]',function(a){d(a,"li","explore_sidebar_trending_roundtable")});(0,window.$)("ul.hot-topics").on("click","img.avatar",function(a){c(a,"li","explore_sidebar_trending_topics_avatar")})};
var bJ=function(a){z.Iu.call(this,{source:cJ(a),use:["autoload"]})};var cJ=function(a){return function(){return a((0,window.$)(this.cb()).last().data("offset")).then(function(a){return{results:a}})}};var NF={};z.aB.prototype.uA=z.ca(21,function(a){this.dn=a});z.Hr.prototype.gx=z.ca(19,function(){return this.Oa});z.Xd.prototype.ol=z.ca(2,function(){return this.ND});MF.prototype.pj=!0;MF.prototype.Bg=function(){return this.YA};MF.prototype.toString=function(){return"Const{"+this.YA+"}"};
var PF={},SF={};OF.prototype.pj=!0;OF.prototype.Bg=function(){return this.bk};OF.prototype.Yx=!0;OF.prototype.ol=function(){return 1};var aG=/^[-,."'%_!# a-zA-Z0-9]+$/;RF.prototype.pj=!0;RF.prototype.Bg=function(){return this.JH};RF.prototype.Yx=!0;RF.prototype.ol=function(){return 1};
var cG=/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/i,bG={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},dG={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ZF=/^[a-zA-Z0-9-]+$/,$F={EMBED:!0,IFRAME:!0,LINK:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,TEMPLATE:!0};z.v(VF,z.Ap);z.e=VF.prototype;z.e.w=function(a){this.h=a;this.bg=z.N("zm-tag-editor-labels",this.h);this.De(!0);this.re();this.cc()};
z.e.Bn=function(){this.Rc||(this.Rc=z.O("div","zm-tag-editor-editor",[this.An=z.O("div","zg-section zg-clear"),this.Ue=z.O("div","zg-section zm-tag-editor-command-buttons-wrap",[this.nb=z.L("zh-topic-merge-input"),z.O("a",{"class":"zg-mr15 zg-btn-blue",href:"#",name:"add",style:"display:none;"},"添加"),this.nE=z.L("zh-topic-merge-btn")])]),z.Rf(this.Rc,this.bg),this.Gg(this.Ue))};
z.e.Gg=function(a){this.Y=new z.zp("/topic/autocomplete",this.nb,null,null,a,!0);this.Y.$f(!0);this.Y.Pl=this.Hd;this.Y.qp(this.lm());this.Y.Iw=[this.Ae];this.v().g(this.Y,"select",this.Ho);this.v().g(this.Y,"suggestionsupdate",this.fv)};z.e.lm=function(){return(0,z.q)(function(a){return z.xb(a,function(a){return z.Bb(this.data,function(c){return c[1]!==a[1]&&3<a.length})},this)},this)};z.e.Ho=function(){var a=this.Y.gj().slice(1);a&&3<a.length&&(this.CD=a,this.Oe(a[3],a[0]))};
z.e.Oe=function(a,b){var c=this;(0,window.setTimeout)(function(){c.nb.value=b})};z.e.He=function(){};z.v(fG,z.yl);
fG.prototype.init=function(){var a=z.L("zh-create-pm");a&&this.v().g(a,"click",this.HQ);var a=z.L("zh-pm-item-wrap"),b=new z.Nu;b.use("locationSource",{param:function(a){return{start:a[a.length-1].getAttribute("data-token")}}});b.w(a);this.v().g(a,"click",this.Pa);(0,window.$)(function(){(0,window.$)("#zh-change-pm-admin").change(function(){var a=(0,window.$)(this).find("option:selected").attr("data-token");window.location.href="self"===a?"/admin_feedback":"/admin_feedback/"+a})});(0,window.$)('a[name\x3d"report"]').each(function(a,
b){var f=(0,window.$)(b).closest(".zm-pm-item").data("report-token");z.xv(new z.uv("message",f),b)})};fG.prototype.HQ=z.Zn(function(){var a;this.co();this.Sb.show();z.Tt(this.Sb,-1);(a=z.Za(window.location.pathname,"admin_inbox")?"admin":(0,window.$)("#zh-change-pm-admin option:selected").attr("data-token"))&&this.Sb.Yt(a)},!0);fG.prototype.co=function(){this.Sb||(this.Sb=new z.Rt({Gt:!0}))};
fG.prototype.Pa=function(a){if(a=z.vo(this.IW,a.target)){var b=a.name,c=z.yg(a,this.jf);if(!c||!a.name)return!0;var d=(0,window.$)(c).data(),f=d.member,g=d.name;switch(b){case "reply":z.Zn((0,z.q)(function(){this.co();this.Sb.show();var a=this.Sb,b=d.type;a.Gp=d.token;a.dB=b;z.Tt(this.Sb,f,g,!1);this.Sb.uc.focus()},this),!0)();break;case "delete":var h=c.getAttribute("data-token");z.Gj("删除私信会话","你确定要删除与 "+g+"的所有会话吗？",function(a){a&&gG(h)},this);break;case "edit":z.mo(this.Zc,this.rh),this.Bm=-1}}};
z.v(hG,z.yl);hG.prototype.init=function(){this.Ts=z.L("zh-pm-detail-item-wrap");this.v().g(this.Ts,"click",this.Pa);var a=z.L("zh-pm-editor-form");if(a){this.Sb=new z.Rt({Gt:!0});this.Sb.Sp=!1;this.Sb.fh(a);this.Sb.show();if(a=this.cb()[0]){var a=(0,window.$)(a).data(),b=this.Sb,c=a.type;b.Gp=a.token;b.dB=c;z.Tt(this.Sb,a.member,a.name)}else a=z.is,z.Tt(this.Sb,a.id,a.$w);this.Sb.focus()}else this.Sb=new z.Rt({Gt:!0});iG(this);this.uj()};
hG.prototype.uj=function(){(0,window.$)('a[name\x3d"report"]').each(function(a,b){var c=(0,window.$)(b).closest(".zm-pm-item").data("token");z.xv(new z.uv("message",c),b)})};hG.prototype.cb=function(){return z.Vf(this.Ts)};
hG.prototype.Pa=function(a){var b=z.vo(this.Ts,a.target);if(b&&(a=b.name,b=z.yg(b,this.jf))){var b=(0,window.$)(b).data(),c=b.token;switch(a){case "reply":this.Sb.show();a=this.Sb;var d=b.type;a.Gp=c;a.dB=d;z.Tt(this.Sb,b.member,b.name,!1);this.Sb.focus();break;case "delete":jG(this,c)}}};z.v(lG,z.Bv);lG.prototype.init=function(a){lG.o.init.call(this,a);this.cc(this.h)};lG.prototype.AB=function(a){this.AB=a};lG.prototype.cc=function(a){if(this.AB){var b=new z.aB,c=this.KM;b.Xw=this.Uw;b.Ww=c||b.Ww;this.dn&&b.uA(this.dn);b.w(a)}};lG.prototype.uA=function(a){this.dn=a};z.v(mG,z.yl);mG.prototype.init=function(){this.v().g(this.h,"click",this.Jo)};mG.prototype.Jo=function(a){a=z.vo(this.h,a.target);"focus"===(a&&a.name)&&(0,z.EC)(a,this.Uw,null,this.JM,{follow_text:this.text[0],unfollow_text:this.text[1]})};z.v(nG,z.yl);z.e=nG.prototype;z.e.w=function(a){this.element=a;var b=(0,window.$)("\x3cul\x3e");this.dJ=(0,window.$)("\x3cli\x3e");b.append(this.dJ);(0,window.$)(a).append(b);this.eJ||(this.eJ=!0,this.qB=new z.V(!0),this.v().wa(this.qB,"success",this.OQ),this.qB.ajax(this.url,null,"POST"))};z.e.OQ=function(){var a=z.cf(this.qB);a&&(a&&a.r?z.U(a.msg):(oG(this,this.dJ,a.msg),this.eJ=!1,this.D()))};z.e.D=function(){this.v().g(this.element,"click",this.Jo)};
z.e.Jo=function(a){var b=(a=a.target)?a.name:"";if(b)switch(b){case "load":case "loadmore":if(!this.Ao){var b=a.getAttribute("data-token"),c=a.getAttribute("data-parent");this.Ao=!0;this.Jj=new z.V(!0);this.v().wa(this.Jj,"success",this.rq);this.qA=a.parentNode;this.qA.innerHTML='\x3cspan class\x3d"zg-gray"\x3e加载中...\x3c/a\x3e';this.Jj.ajax(this.url+"?child\x3d"+b+"\x26parent\x3d"+c,null,"POST")}break;case "topic":window.location.href=a.href}};
z.e.rq=function(){var a=z.cf(this.Jj);if(a)if(a&&a.r)z.U(a.msg);else if(a=a.msg,a[1]){(0,window.$)(this.qA).hide();for(var b=(0,window.$)(this.qA.parentNode),c=0;c<a[1].length;c++){var d=a[1][c],f=(0,window.$)("\x3cli\x3e").addClass("zm-topic-organize-item");"topic"!==d[0][0]&&f.addClass("zm-topic-organize-loadmore");b.append(f);oG(this,f,d)}this.Ao=!1}};z.v(pG,z.Hr);pG.prototype.Ug=function(a){z.WC[0][0]===a?this.xi():pG.o.Ug.apply(this,arguments)};pG.prototype.rC=function(a){if(a=z.cf(a.target))a.r?z.U(a.msg):a.msg&&(window.location.href=a.msg)};z.v(qG,z.S);z.e=qG.prototype;z.e.init=function(){z.uE.L(this);this.w(window.document.body)};
z.e.D=function(){qG.o.D.call(this);vG(this);var a=z.L("zh-topic-top-answerer");a&&(new mG(a,"people",["zg-follow","zg-unfollow"])).init();if(a=z.L("zh-topic-direct-question-list"))a=new lG(a,null,"question",null,!0),a.ti("question-item"),a.init();if(a=z.L("zh-topic-title"))this.ad=new pG(!1,"/topic/update","title"),z.Ir(this.ad,["tid\x3d"+this.sf]),this.ad.addEventListener("beforeedit",z.nB({Mp:!0})),this.ad.w(a),(0,window.$)(a).on("click",".js-pin",function(){var a=(0,window.$)(this),b=a.attr("data-action");
window.$.post(b,{tid:z.WC[0][3]}).done(function(b){b.r?z.U(b.msg):(b=a.hasClass("pin")?'\x3ca href\x3d"javascript:;" data-action\x3d"/pin-topic/remove" class\x3d"js-pin zg-gray unpin topic-hover-content"\x3e\x3ci class\x3d"z-icon-unpin"\x3e\x3c/i\x3e取消常去话题\x3c/a\x3e':'\x3ca href\x3d"javascript:;" data-action\x3d"/pin-topic/add" class\x3d"js-pin zg-gray pin topic-hover-content"\x3e\x3ci class\x3d"z-icon-pin"\x3e\x3c/i\x3e设为常去话题\x3c/a\x3e',a.replaceWith(b))})});if(a=z.L("zh-topic-desc"))(0,window.$)(a).find(".zm-editable-content").data("editable-maxlength"),
this.Xk=new z.Mr(!0,"/topic/update","description"),this.Xk.Mb='\x3ca href\x3d"javascript:;" name\x3d"edit"\x3e添加话题描述\x3c/a\x3e\x3c/div\x3e',z.Ir(this.Xk,["tid\x3d"+this.sf]),this.Xk.Oq=!1,this.Xk.pJ=!1,this.Xk.addEventListener("beforeedit",z.nB({Mp:!0})),this.Xk.w(a);if(a=z.L("zh-topic-faq"))this.Pw=new z.Mr(!0,"/topic/"+(0,window.encodeURIComponent)(z.WC[0][1])+"/faq","content"),this.Pw.Mb='\x3cdiv class\x3d"zm-topic-faq-container"\x3e\x3cdiv class\x3d"zg-gray-normal"\x3e常见问题是该话题下经常会提到的问题的整理，以便后来者查阅（\x3ca href\x3d"/question/20388061" class\x3d"zg-link-litblue"\x3e如何创建？\x3c/a\x3e）\x3c/div\x3e\x3ca href\x3d"javascript:;" name\x3d"edit" class\x3d"zg-link-litblue"\x3e\x3cspan class\x3d"zg-blue-edit"\x3e\x3c/span\x3e为「'+
z.WC[0][0]+"」添加常见问题\x3c/a\x3e\x3c/div\x3e",this.Pw.Oq=!1,this.Pw.w(a);AG(this);BG(this);uG(this);xG(this);yG();zG(this);sG(this);rG();(a=z.N("zm-topic-search-input-new"))&&new z.tn(a,"在话题中搜索");var b=(0,window.$)(a);z.Ax.mb||b.focus(function(){b.addClass("stretch-to")}).blur(function(){b.removeClass("stretch-to")});(a=z.N("zm-topic-ask-in-topic"))&&this.v().g(a,"click",this.DA);(a=z.N("zm-topic-feed-container"))&&(new mG(a,"question",["zg-follow","zg-unfollow"])).init();(a=z.L("zh-topic-side-children-list"))&&
(new mG(a,"topic",["zg-follow","zg-unfollow"])).init();EG(this);(a=z.L("zh-topic-info-add"))&&z.A(z.Vf(a),function(a){var b;a&&a.getAttribute&&(b=a.getAttribute("data-placeholder"))&&new z.tn(a,b)});(0,window.$)(".js-may-disable").click(z.Zn(z.p,!0))};
z.e.aR=function(){this.er=this.Ka.CD;if(!this.FG&&this.er){this.FG=!0;this.Zy=new z.V(!0);this.v().wa(this.Zy,"success",this.vK);this.Zy.ajax("/topic/"+(0,window.encodeURIComponent)(z.WC[0][1])+"/demand","action\x3dmerge\x26target_topic_id\x3d"+this.er[3]);var a=z.L("zh-topic-merged-msg");z.R(z.L("zh-topic-merge"),!1);z.R(a,!0);a=z.yf("a",null,a)[0];a.href="/topic/"+this.er[1];a.innerHTML=this.er[0];this.Ka&&(this.Ka.nb.value="")}};z.e.vK=function(){var a=z.cf(this.Zy);a&&a.r?z.U(a.msg):this.FG=!1};
z.e.KQ=function(){this.JD||(this.JD=!0,this.nw=new z.V(!0),this.v().wa(this.nw,"success",this.tK),this.nw.ajax("/topic/"+(0,window.encodeURIComponent)(z.WC[0][1])+"/demand","action\x3dremove"))};z.e.tK=function(){var a=z.cf(this.nw);a&&a.r?z.U(a.msg):(a=z.L("zh-topic-del-msg"),z.R(z.L("zh-topic-del-btn"),!1),z.R(a,!0),this.Ka&&(this.Ka.nb.value=""),this.JD=!1)};
z.e.AR=function(a){if((a=a.target)&&a.name)if("add"===a.name){if(a=this.iv.value)this.kv=new z.V(!0),this.v().wa(this.kv,"complete",this.sK),this.kv.ajax(window.location.href,"action\x3dadd_alias\x26alias\x3d"+(0,window.encodeURIComponent)(a))}else"remove"===a.name?(this.bA=new z.V(!0),a=a.parentNode.getAttribute("data-token"),this.v().wa(this.bA,"complete",this.xK),this.bA.ajax(window.location.href,"action\x3dremove_alias\x26alias_token\x3d"+a)):"remove-merged"===a.name&&(this.cA=new z.V(!0),a=a.parentNode.getAttribute("data-token"),
this.v().wa(this.cA,"complete",this.yK),this.cA.ajax("/topic/"+(0,window.encodeURIComponent)(z.WC[0][1]+"/demand"),"action\x3dremove\x26target_topic_id\x3d"+a))};z.e.yK=function(){var a=z.cf(this.cA);a&&a.r?z.U(a.msg):tG(this,a.msg)};z.e.xK=function(){var a=z.cf(this.bA);a&&a.r?z.U(a.msg):tG(this,a.msg)};
z.e.sK=function(){var a=z.cf(this.kv);if(a&&a.r)z.U(a.msg);else{var a=a.msg,b=z.O("li");b.setAttribute("data-token",a[1]);b.innerHTML=a[0]+' \x3ca name\x3d"remove" href\x3d"javascript:;" class\x3d"zg-link-gray"\x3e移除\x3c/a\x3e';this.jv.appendChild(b);this.iv.value="";z.R(this.jv.parentNode,!0)}};z.e.FA=function(a){this.Az?this.gb.U()?this.gb.F(!1):(this.gb.F(!0),a.stopPropagation(),a.preventDefault(),this.Ik()):(a.stopPropagation(),a.preventDefault(),this.tj(),this.Ik());this.Az=!0};
z.e.Ik=function(){this.v().wa(window.document,"click",function(){this.gb.F(!1)})};z.e.tj=function(){var a=z.L("zh-topic-side-head"),b=this.Sf.getAttribute("data-auth");this.gb=new z.cv;this.Nx=!0;"f-topic-manage"===b&&this.gb.Ia(this.GR=new z.Yu("管理话题"));this.gb.Ia(this.IR=new z.Yu("组织话题"));this.gb.Ia(this.FR=new z.Yu("话题日志"));this.Nx&&(this.gb.ga(a),this.v().g(this.gb,"action",this.lj))};
z.e.lj=function(a){var b="";a.target===this.GR?b="admin":a.target===this.IR?b="organize":a.target===this.FR&&(b="log");window.location.href=["/topic",this.lB[1],b].join("/")};z.e.jR=function(){var a=z.cf(this.aA);if(a&&!a.r){var b=[];z.A(a,function(a){b.push(z.ho(a,null,!0))});this.ES.innerHTML=b.join("")+'\x3cdiv class\x3d"zg-clear"\x3e\x3c/div\x3e';a.length&&z.R(z.L("zh-topic-side-related-topics-wrap"),!0)}};
z.e.TQ=function(a){var b=a.target;b&&b.name&&"remove"===b.name&&(this.LO=b,this.DF||(this.DF=!0,this.$x=new z.V(!0),this.v().g(this.$x,"success",this.UQ),a="token\x3d"+this.LO.parentNode.getAttribute("data-token")+"\x26action\x3dremove\x26element\x3d"+(0,window.encodeURIComponent)((0,window.$)(a.target).prev("[data-element]").text()),this.$x.ajax("/topic/"+z.WC[0][1]+"/information/manage",a,"POST")))};
z.e.UQ=function(){this.DF=!1;var a=z.cf(this.$x);a&&(a.r?z.U(a.msg):a.msg&&(a=a.msg,z.N("zm-topic-info-content-main",this.h).innerHTML=(0,window.$)(a).html()))};z.e.VQ=function(a){a.preventDefault();this.FF||(this.FF=!0,this.ay=new z.V(!0),this.v().g(this.ay,"success",this.SQ),a=z.Vf(this.ts),this.ay.ajax("/topic/"+z.WC[0][1]+"/information/manage","title\x3d"+a[0].value+"\x26content\x3d"+a[1].value+"\x26url\x3d"+a[2].value+"\x26action\x3dadd","POST"))};
z.e.SQ=function(){this.FF=!1;var a=z.cf(this.ay);a&&(a.r?z.U(a.msg):a.msg&&(a=a.msg,z.N("zm-topic-info-content-main",this.h).innerHTML=(0,window.$)(a).html(),a=z.Vf(this.ts),z.A(a,function(a,c){3>c&&(a.value="")})))};z.e.DA=z.Zn(function(){if(!z.vu()){var a=z.Tr.W();a.show();var b=z.N("zm-topic-search-input-new");b.value&&z.Ur(a,b.value);a.Ka.data.length||a.Ka.gk(z.WC[0])}},!0);z.v(FG,z.S);FG.prototype.B=function(){this.h=this.M().B("FORM",{method:"POST",style:"display:none"})};FG.prototype.post=function(a,b,c){var d=this.m();d||(this.ga(),d=this.m());d.action=b||"";d.target=c||"";GG(this,d,a);d.submit()};z.v(KG,z.yl);KG.prototype.init=function(){var a=z.sm(new z.jm(window.location.href),"group_id");a&&(this.Rj=new z.V(!1),this.v().wa(this.Rj,"success",this.Jz),a&&this.Rj.ajax("/noti7/read","group_id\x3d"+a,"POST"))};KG.prototype.Jz=function(){var a=z.cf(this.Rj);if(a&&!a.r&&a.msg){var b=a.msg;if(!0===b||"true"===b||"True"===b)return;this.oQ=a.msg;this.dispatchEvent("change")}(a=z.sE)&&z.pt(a)};z.v(LG,z.S);z.e=LG.prototype;z.e.init=function(){z.uE.L(this);this.w(window.document.body)};
z.e.D=function(){LG.o.D.call(this);NG(this);if(this.Kb=z.L("zh-list-meta-wrap"))this.v().g(this.Kb,"click",this.Qo),z.sm(new z.jm(window.location.href),"fc")&&PG(this);var a=z.L("zh-favlists-wrap");a&&(new lG(a,null,"favlist",null,!0)).init();MG(this);(a=z.L("zh-favlist-log-list-wrap"))&&(new lG(a,null,"favlist",null,!0)).init();(a=z.L("zh-favlist-following-wrap"))&&(new lG(a,null,"favlist",null,!0)).init();if(a=z.L("zh-favlist-followers-wrap"))a=new lG(a,null,"people",["zg-btn-follow","zg-btn-unfollow"],
!0),a.ti("zm-profile-section-item"),a.AB(!0),a.init();this.v().g(window,"hashchange",this.JW);this.hy();this.Go=new KG;this.Go.init()};z.e.pO=function(a){a=a.target;var b=a.id.split("-"),c=b[1],b=b[2];(new z.V(!0)).ajax("/collection/remove","answer_id\x3d"+c+"\x26favlist_id\x3d"+b);if(b=z.wg(a,"div","zm-item"))a=z.Af("zm-item-answer",b),1===a.length?z.P(b):(a=z.Db(a,function(a){return a.getAttribute("data-aid")===c}))&&z.P(a.parentNode)};z.e.JT=z.Zn(function(){z.gy.W().show(!0)},!0);
z.e.FA=function(a){this.Az?this.gb.U()?this.gb.F(!1):(this.gb.F(!0),a.stopPropagation(),a.preventDefault(),this.Ik()):(a.stopPropagation(),a.preventDefault(),this.tj(),this.Ik());this.Az=!0};z.e.Ik=function(){this.v().wa(window.document,"click",function(){this.gb.F(!1)})};z.e.tj=function(){var a=z.L("zh-list-side-head");this.gb=new z.cv;this.Nx=!0;this.visible||this.gb.Ia(this.KR=new z.Yu("设置为公开"));this.gb.Ia(this.ER=new z.Yu("删除此收藏夹"));this.Nx&&(this.gb.ga(a),this.v().g(this.gb,"action",this.lj))};
z.e.Qo=function(a){a=a.target;switch(a&&a.name){case "edit":z.ky(z.gy.W());break;case "addcomment":PG(this);this.ra.cg();this.ra.vc()&&this.ra.zi("view_comments",(0,window.parseInt)(z.qg(a),10)||0);break;case "remove":OG(this)}};z.e.lj=function(a){a.target===this.KR?z.Gj("确定设置收藏夹为公开？","收藏夹设置为公开后，将不能再设置为私密。",function(a){a&&QG(this)},this):a.target===this.ER&&OG(this)};
z.e.hy=function(){var a=1,b=(0,window.$)("ul.hot-favlists"),c=null;(0,window.$)("#js-hot-fav-switch").click(function(){c&&"pending"===c.state()||(a=5<=a?1:a+1,c=IG(a).done(function(a){b.html(a)}))})};z.v(RG,z.yl);
RG.prototype.init=function(){this.hm=z.L("zh-question-redirect-info");this.hm.innerHTML&&(this.uo=!0);this.v().g(this.hm,"click",function(a){"cancel"===a.target.name&&UG(this)});var a=z.L("zh-question-side-header-wrap");if(z.Ax.mb&&!z.Ax.$F&&a){var b=z.L("zh-question-filter-wrap");b?z.Qf(a,b):a.style[z.D?"styleFloat":"cssFloat"]="none"}(this.Sf=z.L("zh-question-operation-menu"))&&this.tj();this.v().g(z.Wj,"anon_change",function(a){var b=z.L("zh-question-side-invitation-anon");b&&z.R(b,a.lb);(b=z.L("zh-question-side-invitation-notanon"))&&
z.R(b,!a.lb);this.Zl&&this.Zl.Xa(XF(this.data.Yg)||!a.lb)})};
RG.prototype.tj=function(){this.gb=new z.cv;var a=this.data.Pm,b=this.Sf.getAttribute("data-auth"),b=b?b.split(","):[];if(null==a||0===a)this.gb.Ia(this.ot=TG("使用匿名身份",!1)),SG(this),z.aD("question_op_redirect")||"close"===z.Uj.status||(this.gb.Ia(this.Zl=TG(this.uo?"撤消重定向":"问题重定向")),this.Zl.Xa(XF(this.data.Yg)||!this.data.lb)),z.B(b,"auth-f-manage")&&this.gb.Ia(this.JR=TG("更新话题页显示",!1)),this.v().g(this.gb,"action",this.lj),this.ot&&this.v().g(z.Wj,"anon_change",function(){SG(this)}),this.Db&&z.B(b,
"auth-pu-mark")&&(this.gb.Ia(this.zz=TG("优质回答",!0)),this.zz.of(this.Db.qP)),a=new z.lv("Settings",this.gb),a.mi=!0,z.ov(a),a.w(this.Sf)};
RG.prototype.lj=function(a){if(a.target===this.ot)z.Tj(this.data.lb?0:1);else if(a.target===this.Zl){if(!1===z.nB({fm:!0})())return!1;this.Vo||(this.Vo=new z.gB(this.ma),this.v().g(this.Vo,"change",this.XP));this.gb.F(!1);this.uo?UG(this):this.Vo.show()}else a.target===this.DR?z.Mj("/question/"+this.data.jb+(this.DR.Ig()?"/unlock_summary":"/lock_summary"),function(){window.top!==window?window.top.location.href="/question/"+z.Uj.jb:window.location.reload()},"POST"):a.target===this.JR?window.$.post("/refresh_topic_feeds",
{q:z.Uj.jb}).done(function(a){a.r||z.U("操作成功！")}):a.target===this.zz&&window.$.post("/answer/"+this.Db.jb+(this.zz.Ig()?"/good_mark":"/good_unmark")).done(function(a){a.r||z.U("操作成功！")})};
RG.prototype.XP=function(){this.hm.innerHTML='\x3cdiv class\x3d"zg-wrap"\x3e\x3cdiv class\x3d"zu-global-nitify-inner"\x3e\x3cspan class\x3d"zu-global-notify-icon"\x3e\x3c/span\x3e此问题将跳转至 \x3ca href\x3d"/question/'+this.Vo.Nt+'"\x3e'+this.Vo.LH+'\x3c/a\x3e（\x3ca href\x3d"javascript:;" name\x3d"cancel"\x3e撤消重定向\x3c/a\x3e）\x3c/div\x3e\x3c/div\x3e';z.R(this.hm,!0);this.uo=!0;this.Zl.kp("撤消重定向")};z.v(VG,z.S);VG.prototype.B=function(){VG.o.B.call(this);this.h=z.Lf(dJ)};VG.prototype.D=function(){VG.o.D.call(this);this.uh=(0,window.$)(this.m());this.hk=z.up("answer",this.zC);var a="/qrcode?"+window.$.param({url:window.location.protocol+"//"+window.location.hostname+"/question/"+this.vS+"/answer/"+this.zC+"#showWechatShareTip"});(0,window.$)(".js-qrcode-image",this.uh).attr("src",a);this.Bb()};
VG.prototype.Bb=function(){var a=this;(0,window.$)("button.weibo",this.uh).click(function(){a.hk.done(function(a){a.r||(z.az(a.msg.sina),z.pk("share","click_share_answer_to_weibo_start","answer_box_after_submit_answer"))})})};var dJ='\x3cdiv class\x3d"answer-share-tip"\x3e分享我的回答到\x3cbutton class\x3d"wechat hidden-phone"\x3e\x3cdiv class\x3d"qr-code"\x3e扫描二维码\x3cimg class\x3d"js-qrcode-image" alt\x3d"微信分享二维码"\x3e\x3c/div\x3e\x3cspan class\x3d"ico z-ico-wechat"\x3e\x3c/span\x3e微信\x3c/button\x3e\x3cbutton class\x3d"weibo"\x3e\x3cspan class\x3d"ico z-ico-weibo"\x3e\x3c/span\x3e微博\x3c/button\x3e\x3c/div\x3e';z.v(WG,z.Mr);var ZG=[{value:"精简文字描述",label:"精简文字描述"},{value:"补充必要的信息",label:"补充必要的信息"},{value:"改进标点或格式",label:"改进标点或格式"},{value:"other",label:"其他"}];z.e=WG.prototype;z.e.w=function(a){WG.o.w.call(this,a);this.v().g(z.Wj,"anon_change",this.ij)};z.e.ij=function(a){this.vy||z.T.enable(this.h,"zm-editable-disabled",a.lb)};
z.e.Mh=function(){WG.o.Mh.call(this);this.Yz=z.O("div",{"class":"zm-editable-require-reason-wrap",style:"padding:10px 0 0 0"},[z.O("a",{"class":"zg-right zg-link-litblue",href:"/question/19550238/answer/12202028",target:"_blank"},"为什么问题可以被公共编辑？"),YG(),this.GG=z.O("span"),this.xS=z.O("div",{"class":"zg-form-text-input",style:"height:22px;margin:10px 0 0 0;display:none"},this.wS=z.O("textarea",{style:"width:100%;height:22px !important;min-height:22px !important;"}))]);z.Qf(this.Yz,this.rc);this.bp&&
$G(this," * 必选","zg-gray-normal");var a=z.yf("select",null,this.Yz)[0];this.v().g(a,"change",function(){z.R(this.xS,"other"===a.value);$G(this," * 必选","zg-gray-normal")})};
z.e.Ug=function(a){var b=z.yf("select",null,this.Yz)[0],c=b.value;if(this.bp){if("none"===c){$G(this,"请选择一个修改理由");return}if("other"===b.value&&(c=z.jo(this.wS.value),!c)){$G(this,"请填写修改理由");return}}"title"===this.jr&&-1===a.indexOf("?")&&-1===a.indexOf("？")?$G(this,"还没有输入问号"):("none"===c&&(c=""),this.params=["id\x3d"+this.ma+"\x26reason\x3d"+(0,window.encodeURIComponent)(c)+"\x26question_id\x3d"+this.ma],this.dispatchEvent("change"),WG.o.Ug.call(this,a),$G(this,"* 必选","zg-gray-normal"),this.bp=!0)};
z.e.af=function(){return this.Ed&&this.RR?(0,z.Bo)(z.Ja(this.Oa.value)):WG.o.af.call(this)};z.e.Ve=function(){(0,window.$)(window).on("beforeunload.EditorWithReason",(0,z.q)(function(){return"你对问题的修改还未保存，确认离开该页面吗？"},this))};z.e.Cf=function(){(0,window.$)(window).off("beforeunload.EditorWithReason")};z.e.xi=function(){WG.o.xi.call(this);this.Cf()};z.e.qf=function(){WG.o.qf.call(this);this.Ve()};z.v(aH,z.S);aH.prototype.L=function(a,b){aH.o.L.call(this,a,b);this.v().g(a,"beforeexpand",this.mO)};aH.prototype.mO=function(a){var b=a.target;z.$i(this,function(a){b!==a&&a.vc()&&a.td(!1)})};aH.prototype.H=function(){this.v().H();aH.o.H.call(this)};z.v(bH,z.Aj);bH.prototype.D=function(){bH.o.D.call(this);z.Dj(this,490);(0,window.$)(this.m()).addClass("user-guiding-dialog")};z.v(fH,z.S);z.e=fH.prototype;z.e.B=function(){fH.o.B.call(this);this.h=z.O("div",{className:"question-invite-panel"})};z.e.D=function(){fH.o.D.call(this);this.K=(0,window.$)(this.m())};z.e.C=function(){fH.o.C.call(this);this.ba&&this.ba.H();delete this.ba;delete this.Il;delete this.yj};z.e.vc=function(){return this.Hb};z.e.cg=function(){this.td(!this.Hb)};
z.e.td=function(a){a!==this.vc()&&(this.dispatchEvent(a?"beforeexpand":"beforecollapse"),a&&!this.wc&&gH(this),this.Hb=a,this.K.toggle(a),this.dispatchEvent(a?"expand":"collapse"))};
z.e.cy=function(a){var b=this,c=(0,z.Wr)(eJ),d=new z.An(a,{Hd:20,source:"/question/ac/invite-people?question_token\x3d"+this.To,Zg:this.m(),placeholder:"搜索你想邀请的人",rd:function(a,b,d){d.innerHTML=c(a.data)},filter:function(a){return z.xb(a,function(a){return!lH(b,a.member_hash)})},select:function(){return""},format:function(a){return a}});d.pi=function(){return!1};var f=d.N;f.className="suggest-persons search";f.Yf="person";f.$f(!1);var g=(0,window.$)(".suggest-persons-wrapper",this.h),h=z.zj(function(){(0,window.$)(f.m()).on("click",
"button",window.$.proxy(b.VE,b))}),k=(0,window.$)(".invite-title .spinner-gray");(0,window.$)(".search-input",this.h).on("input",function(){k.css("display","inline-block")});d.addEventListener("show",function(){k.hide();var a=f.m();g.hide();(0,window.$)(".no-result-tips",b.h).remove();var c=(0,window.$)(".person",a);5<c.length&&(c.hide().slice(0,5).show(),(0,window.$)('\x3ca class\x3d"js-more" href\x3d"#"\x3e更多搜索结果\x3c/a\x3e').appendTo(a).one("click",function(){c.show();(0,window.$)(this).remove();
return!1}));h()});d.addEventListener("hide",function(){k.hide();a.value.length?(0,window.$)(".no-result-tips",b.h).length||(g.hide(),(0,window.$)('\x3cspan class\x3d"no-result-tips"\x3e没有找到你想邀请的人\x3c/span\x3e').appendTo(b.h)):(g.show(),(0,window.$)(".no-result-tips",b.h).remove())});d.addEventListener("dismiss",function(){(0,window.$)(".no-result-tips",b.h).remove();g.show()});this.ba=d};z.e.xQ=function(){this.vc()?(this.ba&&this.ba.H(),gH(this)):this.wc=!1};z.e.jN=function(){z.Tj(0)};
z.e.VE=function(a){var b=a.target,c=this.AH((0,window.$)(b).parents(".person"));this.Il&&"pending"===this.Il.state()&&this.Il.abort();a=b.getAttribute("data-type");var d=z.T.has(b,this.MF),f=(0,z.q)(function(a){a?(nH(this,b,!0),this.yj.unshift(c),pH(this),mH(this,c.id,!0),this.rL()):(nH(this,b,!1),oH(this,c.id),mH(this,c.id,!1))},this);d?(this.Il=WF(this.To,c.id),f(!1)):(this.Il=window.$.post("/question/askpeople",{qid:this.To,uid:c.id,_source_type:a,op:"add"}).done(function(a){a.r&&(z.U(a.msg),f(!1))}),
f(!0),kH(this,a))};z.e.kN=function(a){a=a.target.getAttribute("data-uid");WF(this.To,a);mH(this,a,!1);oH(this,a)};z.e.rL=z.zj(function(){z.Z.Yg&&window.$.post("/question/popup",{action:"invite",question_token:this.To},function(a){a&&eH(new bH,a)})});z.e.AH=function(a){var b=(0,window.$)(".zm-item-link-avatar",a),c=(0,window.$)(".zg-link",a);return{id:String((0,window.$)("button",a).data("uid")),avatar:(0,window.$)("img",b).attr("src"),fullname:c.text(),url_token:b.attr("href").split("/").slice(-1)[0]}};
var hH='\x3ci class\x3d"icon icon-spike"\x3e\x3c/i\x3e\x3cdiv class\x3d"spinner"\x3e正在加载，请稍等 \x3ci class\x3d"spinner-gray"\x3e\x3c/i\x3e\x3c/div\x3e',rH='你已邀请 \x3cspan class\x3d"invited-shortlist"\x3e\x3c% helper.each(persons.slice(0, 2), function(person, i, sliced) { %\x3e\x3ca href\x3d"/people/\x3c%\x3dperson.url_token%\x3e" class\x3d"zg-link-gray"\x3e\x3c%\x3dperson.fullname%\x3e\x3c/a\x3e\x3c%\x3d i !\x3d\x3d sliced.length - 1 ? "、" : ""%\x3e\x3c% }); %\x3e\x3c%\x3dhelper.fullList()%\x3e\x3c/span\x3e\x3c% if (persons.length \x3e 2) { %\x3e 等 \x3c%\x3dpersons.length%\x3e 人 \x3c% } %\x3e\x3c% if (persons.length \x3c maxInvites) { %\x3e ，还可以邀请 \x3c%\x3dmaxInvites - persons.length%\x3e 人\x3c% } %\x3e',
qH='\x3cdiv class\x3d"invited-hovercard"\x3e\x3ci class\x3d"icon icon-spike"\x3e\x3c/i\x3e\x3cul class\x3d"invited-fulllist"\x3e\x3c% helper.each(persons, function(person, i) { %\x3e\x3cli\x3e\x3ca title\x3d"\x3c%-person.fullname%\x3e" class\x3d"zm-item-link-avatar" href\x3d"/people/\x3c%\x3dperson.url_token%\x3e"\x3e\x3cimg src\x3d"\x3c%\x3dperson.avatar%\x3e" class\x3d"zm-item-img-avatar"\x3e\x3c/a\x3e\x3ca href\x3d"/people/\x3c%\x3dperson.url_token%\x3e" class\x3d"zg-link-gray" title\x3d"\x3c%-person.fullname%\x3e"\x3e\x3c%\x3dperson.fullname%\x3e\x3c/a\x3e\x3cbutton class\x3d"cancel-button zg-link-btn zg-link-gray" data-uid\x3d"\x3c%\x3dperson.id%\x3e"\x3e收回邀请\x3c/button\x3e\x3c/li\x3e\x3c% }) %\x3e\x3c/ul\x3e\x3c/div\x3e',
eJ='\x3ca data-tip\x3d"p$t$\x3c%\x3durl_token%\x3e" class\x3d"zm-item-link-avatar" href\x3d"/people/\x3c%\x3durl_token%\x3e" title\x3d"\x3c%\x3dfullname%\x3e"\x3e\x3cimg src\x3d"\x3c%\x3davatar_path%\x3e" class\x3d"zm-item-img-avatar"\x3e\x3c/a\x3e\x3cdiv class\x3d"content"\x3e\x3cbutton class\x3d"invite-button zg-btn zg-btn-green" data-uid\x3d"\x3c%\x3dmember_hash%\x3e" data-type\x3d"search"\x3e邀请回答\x3c/button\x3e\x3cdiv class\x3d"describe"\x3e\x3ca data-tip\x3d"p$t$\x3c%\x3durl_token%\x3e" href\x3d"/people/\x3c%\x3durl_token%\x3e" class\x3d"zg-link"\x3e\x3c%\x3dhighlighted_fullname%\x3e\x3c/a\x3e\x3c% if(headline) { %\x3e ，\x3cspan class\x3d"bio" title\x3d"\x3c%-headline%\x3e"\x3e\x3c%\x3dhighlighted_headline%\x3e\x3c/span\x3e \x3c% } %\x3e\x3c/div\x3e\x3cdiv class\x3d"reason"\x3e\x3c% if (detailed_info) {%\x3e \x3c%\x3ddetailed_info%\x3e\x3c% } %\x3e\x3c% if (topic["answer_num"]) {%\x3e在 \x3ca href\x3d"/people/\x3c%\x3durl_token%\x3e/topic/\x3c%\x3dtopic["url_token"]%\x3e/answers" data-tip\x3d"t$b$\x3c%\x3dtopic["url_token"]%\x3e" data-token\x3d"\x3c%\x3dtopic["url_token"]%\x3e" data-topicid\x3d"\x3c%\x3dtopic["id"]%\x3e"\x3e \x3c%\x3dtopic["name"]%\x3e \x3c/a\x3e 话题下有 \x3c%\x3dtopic["answer_num"]%\x3e 个回答 \x3c% } %\x3e\x3c/div\x3e\x3c/div\x3e';z.v(sH,z.S);z.e=sH.prototype;z.e.D=function(){sH.o.D.call(this);this.v().g(this.h,"click",this.Qo);tH(this);this.v().g(this,"click!",function(a){"comment"===a.namespace&&a.Lc.fill("label","question")});this.g("trackRequested",function(a){a.label="question_box";z.nk(a)})};z.e.uj=function(){var a=(0,window.$)("a[name\x3dreport-question]",this.m());a.length&&z.xv(new z.uv("question",this.data.ma),a[0])};
z.e.vj=function(){var a=(0,window.$)('a[name\x3d"share"]',this.m()).get(0);a&&z.bz(a,"question",this.data.jb,window.location.protocol+"//"+window.location.host+"/question/"+this.data.jb).ud(this)};
z.e.Qo=function(a){var b=(a=z.vo(this.h,a.target))&&a.name;if(b)switch(b){case "addcomment":"添加评论"===window.$.trim((0,window.$)(a).text())?z.Zn(this.Rr,{Ca:"question_add_comment_start"}).call(this,a):this.Rr(a);break;case "remove":wH(this);break;case "admin":vH(this,a);break;case "invite":this.py.cg(),this.dispatchEvent(new z.Dw("click!invitation",{category:"invitation",action:(this.py.vc()?"show":"hide")+"_ask_to_answer_card",label:"?",value:this.data.oe}))}};
z.e.Rr=function(a){this.ra.cg();this.ra.vc()&&this.ra.zi("view_comments",(0,window.parseInt)(z.qg(a),10)||0)};z.e.PL=function(a){this.lC.X(a.msg.action);this.lC.kp(a.msg.caption)};z.v(xH,z.uz);xH.prototype.w=function(a){xH.o.w.call(this,a);this.Ee&&this.Ut(this.fr.lb);this.g("trackRequested",function(a){a.label="answer_box";a.value=(0,window.$)(this.h).index()+1;z.nk(a)})};xH.prototype.U=function(){return(0,window.$)(this.h).is(":visible")};z.v(yH,z.J);z.e=yH.prototype;z.e.show=function(a){if(this.vo)return this;this.vo=!0;this.dispatchEvent("willShow");this.K.addClass(this.position).appendTo("body");this.$B=(0,window.$)(a);this.target=this.$B[0];if(!this.target)return this;this.da();this.K.addClass("is-active");this.dispatchEvent("show");this.K.on("click",".js-dismiss",(0,z.q)(this.hide,this));!1!==this.Bz.Aq&&this.Aq();return this};
z.e.da=function(){var a=this.position,b=this.offset(a),c;c=b;var d=this.Vi,f=(0,window.$)(window),g=d.clientWidth,d=d.clientHeight,h=f.scrollTop(),k=f.scrollLeft(),m=f.innerHeight(),f=f.innerWidth();c={top:c.top>h+z.Ei(window.document.body).top,bottom:c.top+d<h+m,left:c.left>k,right:c.left+g<k+f};c=c[a]?a:z.$b(c,z.ob);a!==c&&(b=this.offset(c));0>b.left&&(this.K.find(".tooltip-arrow").css("left",zH(this.Vi).width/2+b.left),b.left=0);this.K.removeClass("top right bottom left").addClass(c).css(b);this.dispatchEvent("reposition")};
z.e.offset=function(a){var b=zH(this.Vi),c=b.width,b=b.height,d=zH(this.target),f=d.width,d=d.height,g=this.$B.offset();switch(a){case "top":return{top:g.top-b,left:g.left+f/2-c/2};case "bottom":return{top:g.top+d,left:g.left+f/2-c/2};case "right":return{top:g.top+d/2-b/2,left:g.left+f};case "left":return{top:g.top+d/2-b/2,left:g.left-c}}};
z.e.hide=function(a){if(this.vo)return this.dispatchEvent({type:"hide",reason:"string"===typeof a?a:"click"}),this.vo=!1,window.Modernizr.csstransitions?this.K.onTransitionEnd((0,z.q)(this.clear,this),350).removeClass("is-active"):this.clear(),this};z.e.Aq=function(){function a(){if(!b.vo)return z.yk.qa("update",a);z.vk(z.yk,b.Vi)||(b.hide("outOfView"),z.yk.qa("update",a))}var b=this;z.yk.g("update",a)};z.e.clear=function(){this.K.remove()};(0,z.w)();z.v(DH,z.S);var UH=z.zj(CH);z.e=DH.prototype;z.e.init=function(){z.uE.L(this);this.w(window.document.body)};z.e.D=function(){DH.o.D.call(this);this.io();FH(this);this.Go=new KG;this.v().g(this.Go,"change",this.Jz);this.Go.init();this.zI();var a=z.L("zh-question-meta-wrap");a&&(this.Vz=new sH(this.data),this.L(this.Vz),this.Vz.w(a));EH(this);(a=z.Ak.topic_errors_info)&&z.Cl(a)};
z.e.zI=function(){this.data.jb=z.Uj.jb;IH(this,!0);z.Z.Ca()&&(GH(this),HH(this));OH(this);(this.Uv=z.L("zg-question-suggested-topics"))&&this.v().g(this.Uv,"click",this.vQ);this.ho();this.v().g(window,"hashchange",function(a){a=a.gc;a.oldURL&&"writing"===a.oldURL.split("#")[1]||SH(this)});LH(this);RH(this);NH(this);SH(this,null);KH(this);z.UC&&(0,window.setTimeout)(function(){window.location.href=z.UC},5E3)};
z.e.io=function(){(0,z.Wz)("question",this.data.jb,"read");this.v().g(this,["click!","show!"],function(a){"comment"===a.namespace&&a.Lc.fill("category","question_answer").fill("label","question_answer");"invitation"===a.namespace&&a.Lc.fill("label","question_page")})};z.e.Jz=function(){this.wO=!0;this.mk=(0,window.$)(this.Go.oQ)[0];z.Rf(this.mk,z.L("zh-question-redirect-info"));z.R(this.mk,!0);z.Ax.mb||(this.cj=new z.er,this.cj.w(this.mk),KF(this.cj));this.v().g(this.mk,"click",this.SE);SH(this)};
z.e.OO=function(a){"close"!==z.Uj.status&&(a=a.target.m(),this.Nb=new WG(this.data.ma,"/question/detail","content",!0,null,600),XG(this.Nb,XF(this.data.Yg)),z.N("zm-editable-content",a).innerHTML&&(this.Nb.bp=!0),this.Nb.w(a),this.v().g(this.Nb,"click_edit",function(){z.Y.Aa("ga_question_supplement_edit_start")}),this.v().g(this.Nb,"cancel_edit",function(){z.Y.Aa("ga_question_supplement_edit_cancel")}),this.v().g(this.Nb,"save_changed",function(){z.Y.Aa("ga_question_supplement_edit_save_changed")}),
this.v().g(this.Nb,"save_unchanged",function(){z.Y.Aa("ga_question_supplement_edit_save_unchanged")}),this.Nb.addEventListener("beforeedit",z.nB({fm:!0})))};
z.e.RO=function(a){a=a.target.m();var b=z.L("zh-question-answer-summary-link"),c;!a||!z.Ax.NF&&this.data.YT||(c=new z.Mr(!0,"/question/summary","content"),z.Ir(c,["id\x3d"+this.data.ma]),c.Oq=!1,c.w(a));if(b){var d=z.L("zh-question-answer-summary-wrap");this.v().g(b,"click",function(){c&&(z.R(d,!0),c.qf())}).g(d,"click",function(a){"cancel"===a.target.name&&(a=!c.af(),z.R(d,!a))})}this.XT=c;this.XT.addEventListener("beforeedit",z.nB({fm:!0}))};
z.e.SE=function(a){if("close"===a.target.name){if(this.cj&&(z.hr(this.cj),z.gr(this.cj,!1),window.history.replaceState)){a=new z.jm(window.location.href);var b=a.md();b.remove("q");b.remove("psq");window.history.replaceState({},"",a.Fe+"?"+b.toString())}z.R(this.mk,!1);z.R(this.Bt,!1)}else if("A"===a.target.tagName&&"zh-question-suggest-reask"===a.target.id&&(z.R(this.Bt,!1),z.Tr.W().show()),b="a"===(0,window.$)(a.target).prop("tagName").toLowerCase()?a.target:this.zg(a.target,"A"))a.preventDefault(),
a.stopPropagation(),a=b.getAttribute("data-source")||b.href,b=a.indexOf("#"),a=0>b?null:a.substr(b+1),SH(this,a?(0,window.decodeURIComponent)(a):a)};z.e.WN=function(){var a=this.IK,b=a.m(),c=a.ne.bb()[0];z.R(b,!1);c=z.Lf((0,z.x)(c));z.Qf(c,b);this.Ji[a.pa]=null;this.vq=z.xb(this.vq,function(b){return b!==a.pa},this);var d=999;this.rv=z.xb(this.rv,function(b){b.aid===a.pa&&(d=b.vote);return b.aid!==a.pa},this);z.P(b);a.H();MH(this,c,d)};
z.e.lz=function(a){a=a.target;if(a instanceof xH){var b=a.m();switch(a.Wu){case "collap":this.en.appendChild(b);z.T.add(b,"zm-item-collapsed");this.data.oe--;KH(this);break;case "cancel_collap":this.xq.appendChild(b);z.T.remove(b,"zm-item-collapsed");TH(this,b);this.data.oe++;KH(this);break;case "set_delete":NH(this);this.data.oe--;KH(this);break;case "cancel_delete":TH(this,this.Ji[this.ii].m()),NH(this),this.data.oe++,KH(this)}}};z.e.zE=function(a){return this.Ji[a]};
z.e.$T=function(a){(a=z.vo(this.Jh,a.target))&&a.name&&("expand"===a.name?(this.HL||QH(this),PH(this,!0)):PH(this,!1))};z.e.FQ=function(){var a=this.Ji[this.ii],b;a?(IF(a),TH(this,a.m())):(b=this.Qj,a=new z.V(!0),this.v().wa(a,"success",function(){window.location.href="/question/"+z.Uj.jb+"/answer/"+b.url_token}),a.ajax("/answer/unremove","aid\x3d"+b.id))};
z.e.wQ=function(){var a=this.ub,b=a.uq.checked,c=Number(!a.qD.checked),a={Mj:!0,title:"确认放弃匿名身份？",content:"你在该问题下的赞同和关注行为将以实名显示。"},d=(0,z.q)(function(){if(!this.xhr||!this.xhr.Pb()){var a=this.ub.af();if(a){var d=new z.V(!0),h=new z.pm,k=b?1:0;h.add("id",this.ma).add("content",a).add("anon",k).add("copyable",c);d.on("success",function(){z.Uj.lb!==k&&(z.Uj.lb=k,z.Wj.dispatchEvent(new z.Vj(k)));var a=z.cf(this.xhr);a&&!a.r?(a=z.Lf((0,z.x)(a.msg[0])),this.xq.appendChild(a),MH(this,a,this.vq.length),
z.oo(a),NH(this),z.Gy(this.ub.XD),z.Jy(this.ub.XD),this.ub.H(),z.Uj.lb||(new VG(this.data.jb,this.Ji[this.ii].jb)).ga((0,window.$)(".zu-main-content-inner").get(0)),this.data.oe++,KH(this)):z.Kj("提示信息",a.msg)},!1,this);d.ajax("/answer/add",h.toString());this.xhr=d}}},this);z.Uj.lb&&!b?z.Gj(a,function(a){a&&d()}):d()};z.e.zg=function(){};z.e.vQ=function(a){if((a=this.zg(a.target))&&a.name){var b=a.name;"close"===b?z.R(this.Uv,!1):"addtag"===b&&(this.Ka.Oe(a.id.split("-")[1],a.innerHTML),z.R(a,!1))}};
z.e.ho=function(){this.KA=new RG(this.ma);this.KA.init()};z.v(VH,DH);z.e=VH.prototype;z.e.zI=function(){(this.pr=z.L("zh-single-answer-disable-wrap"))&&this.v().g(this.pr,"click",this.aT);this.ws();this.ho();YH();IH(this,!1);var a=(0,window.$)("#zh-question-answer-collections \x3e .zh-general-list").get(0);if(a){var b=new z.Nu({use:["autoload","nodeSource"]});this.L(b);b.w(a)}WH(this)};z.e.io=function(){this.v().g(this,["click!","show!"],function(a){"invitation"===a.namespace&&a.Lc.fill("label","answer_page")});VH.o.io.call(this)};
z.e.aT=function(a){a.target&&a.target.name&&IF(this.Db)};z.e.ws=function(){var a=z.N("zm-item-answer",z.L("zh-question-answer-wrap"));if(a){this.Db=new xH({ma:this.ma,OD:!0});this.L(this.Db);this.Db.w(a);a=this.v();a.g(this.Db,"change",this.lz);if(this.Db.Ee){a.g(z.Wj,"anon_change",function(a){XH(this,a.lb)});var b=this.Db.ne;b&&a.g(b,"change",function(){var a=(0,z.x)(b.bb()[0]),a=z.Lf(a);z.Tf(a,this.Db.h);this.Db.H();this.ws(a)})}$H(this);z.Ez(this.Db,{autofocus:!1,qG:!0});CH(this.Db)}};
z.e.zE=function(a){if(this.Db.pa===a)return this.Db};z.e.TK='\x3ch3\x3e关于作者\x3c/h3\x3e\x3c% if (author) { %\x3e\x3ca class\x3d"zm-list-avatar-link" href\x3d"/people/\x3c%\x3d author.url_token %\x3e" tabindex\x3d"-1"\x3e\x3cimg class\x3d"zm-list-avatar-medium" src\x3d"\x3c%\x3d author.avatar_path.replace("_s.","_m.") %\x3e"/\x3e\x3c/a\x3e\x3cdiv class\x3d"zm-list-content-medium"\x3e\x3ch2 class\x3d"zm-list-content-title"\x3e\x3ca href\x3d"/people/\x3c%\x3d author.url_token %\x3e"\x3e\x3c%\x3d author.fullname %\x3e\x3c/a\x3e\x3c/h2\x3e\x3cdiv class\x3d"zg-gray-normal"\x3e\x3c%\x3d author.headline || "" %\x3e\x3c/div\x3e\x3c/div\x3e\x3c% } else { %\x3e\x3ca class\x3d"zm-list-avatar-link" href\x3d"javascript:;"\x3e\x3cimg class\x3d"zm-list-avatar-medium" src\x3d"http://img.zhihu.dev:4080/66/6b/666b0abfc_m.jpg"/\x3e\x3c/a\x3e\x3cdiv class\x3d"zm-list-content-medium"\x3e\x3ch2 class\x3d"zm-list-content-title"\x3e匿名用户\x3c/h2\x3e\x3c/div\x3e\x3c% } %\x3e';
z.e.ho=function(){this.KA=new RG(this.ma,this.Db);this.KA.init();var a=z.L("js-sidebar-author-info");a&&(new mG(a)).init()};z.e.lz=function(a){a=a.target;if(a instanceof xH)switch(a.Wu){case "collap":z.T.add(a.m(),"zm-item-collapsed");break;case "cancel_collap":z.T.remove(a.m(),"zm-item-collapsed");break;case "set_delete":case "cancel_delete":$H(this),window.location.reload()}};z.v(aI,z.S);z.e=aI.prototype;z.e.init=function(){var a=z.N("js-topic-feed-page");this.w(a)};
z.e.D=function(){aI.o.D.call(this);var a=this;this.MB=(0,window.$)(".js-topic-feed-container",this.h);this.MB.find(".js-topic-item").each(function(){var b=new dI;a.L(b);b.w(this);a.v().g(b,"unfollow",function(){eI(a)})});this.vt=new iI;this.vt.w((0,window.$)(".js-pinned-topics",this.element)[0]);(this.$b=z.L("js-load-more"))&&this.v().g(this.$b,"click",this.vz);this.v().g(this.vt,"change",function(a){(0,window.$)("#tf-"+a.ZI).find(".js-pin").replaceWith('\x3ca href\x3d"javascript:;" data-action\x3d"pin-topic" class\x3d"js-pin zg-gray pin topic-hover-content"\x3e\x3ci class\x3d"z-icon-pin"\x3e\x3c/i\x3e设为常去话题\x3c/a\x3e')});
this.Iu=(0,window.$)(".follow-topics-count");fI(this);this.io()};z.e.vz=function(){bI(this.$b,!0);this.xhr=new z.V(!0);this.v().wa(this.xhr,"complete",(0,z.q)(this.Tg,this));var a=new z.wo;a.add("page",++this.page);this.xhr.ajax(window.location.pathname,a.md())};z.e.Tg=function(){var a=z.cf(this.xhr);a&&!a.r&&(0<a.msg.length?(cI(this,a.msg),bI(this.$b,!1)):(0,window.$)(this.$b).hide())};
z.e.io=function(){var a=(0,window.$)(this.m());window.$.each({".zu-main-sidebar .topics-plaza a":["visit_topic_square","topic_feed_sidebar"],".hidden-topics-plaza a":["visit_topic_square","topic_feed_recommend"],".js-pager.topics-pager":["click_change_recommend_topic","topic_feed_recommend"],".js-nomore-recommend":["click_nomore_recommend_topic","topic_feed_recommend"],".js-list .zg-btn-follow":["click_follow_recommend_topic","topic_feed_recommend"],".js-list .zg-btn-unfollow":["click_unfollow_recommend_topic",
"topic_feed_recommend"],'.topic-recommend .topic-feed-item a[href^\x3d"/question/"]':["visit_question","topic_feed_recommend"]},function(b,c){a.on("click",b,function(){z.X.apply(null,["topic"].concat(c))})})};z.v(dI,z.S);dI.prototype.D=function(){dI.o.D.call(this);this.v().g(this.h,"click",(0,z.q)(this.jz,this))};
dI.prototype.jz=function(a){var b=a.target;a=(0,window.$)(b).attr("data-action");var c=(0,window.$)(this.h).find(".topic-avatar img"),d=c.clone(),f,g=(0,window.$)(this.h).data("id");if("pin-topic"===a)f=this.getParent().vt,lI(f,g).done(function(a){if(!a.r&&a.msg){(0,window.$)(".zu-main-sidebar .side-title").show();z.oo(b);(0,window.$)(b).replaceWith('\x3ca href\x3d"javascript:;" data-action\x3d"unpin-topic" class\x3d"js-pin zg-gray unpin topic-hover-content"\x3e\x3ci class\x3d"z-icon-unpin"\x3e\x3c/i\x3e取消常去话题\x3c/a\x3e');
a=c.offset();var g=(0,window.$)(f.h).offset();1E3<a.top-g.top?(g=(0,window.$)(".top-nav-topic-selector.current a").offset(),g={top:g.top+20,left:g.left+15,width:"25px",height:"25px",opacity:.1},d.css({position:"absolute","z-index":"999"}).css("top",a.top).css("left",a.left).appendTo("body").animate(g,300,function(){d.remove()})):d.css({position:"absolute","z-index":"999"}).appendTo("body").css("top",a.top).css("left",a.left).animate({top:g.top-63+(0,window.$)(f.h).height(),left:g.left,width:"-\x3d50px",
height:"-\x3d50px",opacity:.5},300,function(){d.remove()});(0,window.$)(".no-pin-topics").hide()}});else if("unpin-topic"===a)mI(this.getParent().vt,g,function(){var a=(0,window.$)(b).replaceWith('\x3ca href\x3d"javascript:;" data-action\x3d"pin-topic" class\x3d"zg-gray pin topic-hover-content" style\x3d""\x3e\x3ci class\x3d"z-icon-pin"\x3e\x3c/i\x3e设为常去话题\x3c/a\x3e')[0];z.oo(a)});else if("unfollow"===a){var h=this,k=(0,window.$)(h.h);(a=(0,window.$)(".topic-recommend .zg-btn-unfollow[data-id\x3d"+
b.id.match(/-(.*)/)[1]+"]").get(0))?(0,z.EC)(a,"topic",null,["zg-btn-follow","zg-btn-unfollow"]):(0,z.EC)(b,"topic",null,["follow","unfollow"]);k.fadeOut(function(){k.remove();h.dispatchEvent("unfollow")})}};z.v(iI,z.S);iI.prototype.QS=(0,z.Wr)('\x3cdiv class\x3d"side-topic-item js-pin-item  cursor-move" data-topicid\x3d"\x3c%\x3dtopic.id%\x3e" \x3e\x3ca href\x3d"/topic/\x3c%\x3dtopic.url_token%\x3e" class\x3d"pin-topic-avatar-link"\x3e\x3cimg src\x3d"\x3c%\x3dtopic.avatar_path%\x3e" alt\x3d"" title\x3d"拖动以排序" class\x3d"side-topic-avatar js-topic-avatar"\x3e\x3c/a\x3e\x3cdiv class\x3d"side-topic-content ellipsis"\x3e\x3ca href\x3d"/topic/\x3c%\x3dtopic.url_token%\x3e" class\x3d"topic-link side-topic-title"\x3e\x3c%\x3dtopic.name%\x3e\x3c/a\x3e\x3cdiv class\x3d"side-topic-meta"\x3e\x3c% if (topic.children_num \x3e 0) { %\x3e\x3cspan class\x3d"zg-gray"\x3e\x3c%\x3dtopic.children_num%\x3e 个子话题\x3c/span\x3e\x3cspan class\x3d"bull"\x3e\x26bull;\x3c/span\x3e\x3c% } %\x3e\x3cspan class\x3d"zg-gray"\x3e\x3c%\x3dtopic.followers_num%\x3e 人关注\x3c/span\x3e\x3c/div\x3e\x3c% if (topic.feed_num \x3e 0) { %\x3e\x3ca class\x3d"side-topic-more" href\x3d"/topic/\x3c%\x3dtopic.url_token%\x3e"\x3e\x3c%\x3dtopic.feed_num %\x3e 条动态\x26nbsp;\x26raquo;\x3c/a\x3e\x3c% }else{ %\x3e\x3ca class\x3d"side-topic-more" href\x3d"/topic/\x3c%\x3dtopic.url_token%\x3e"\x3e进入话题 \x26raquo;\x3c/a\x3e\x3c% } %\x3e\x3c/div\x3e\x3ca href\x3d"javascript:;" data-action\x3d"up" class\x3d"up" data-tip\x3d"s$b$置顶"\x3e\x3c/a\x3e\x3ca href\x3d"javascript:;" data-action\x3d"remove" class\x3d"delete"\x3e\x3c/a\x3e\x3c/div\x3e');
iI.prototype.D=function(){iI.o.D.call(this);this.v().g(this.h,"click",(0,z.q)(this.jz,this));jI(this)};
iI.prototype.jz=function(a){var b=this,c=a.target,d=(0,window.$)(c).attr("data-action");if(d){var f=(0,window.$)(c).parents(".js-pin-item");if("up"===d){a=f.position();var g=f.clone();f.before(g).css({position:"absolute","z-index":"999"}).css("top",a.top).animate({top:(0,window.$)(b.h).position().top},200,function(){g.remove();f.css({position:"relative",top:0}).prependTo(b.h);b.gu()});g.css("opacity",0)}else"remove"===d&&f.fadeOut(function(){f.remove();b.gu();b.dispatchEvent({type:"change",ZI:f.attr("data-topicid")});
0===(0,window.$)(".js-pin-item").length&&(0,window.$)(".no-pin-topics").show()})}else a.stopPropagation()};iI.prototype.gu=function(){var a=[];(0,window.$)(this.h).find("div.js-pin-item").each(function(){a.push((0,window.$)(this).attr("data-topicid"))});return window.$.post("/pin-topic",{topic_ids:a.join(",")},function(){})};z.v(nI,z.S);
(function(){function a(a){z.ta(this,a)}function b(a){this.LG=a;this.K=(0,window.$)("\x3cli\x3e");this.Yu()}function c(a){this.GL=a;this.K=(0,window.$)("\x3cul\x3e")}nI.prototype.D=function(){nI.o.D.call(this);this.MS()};nI.prototype.MS=function(){var b=this.h;window.$.get("/trending").done(function(f){var g=window.$.map(f,a.ZL);b.appendChild((new c(g)).ga().K.get(0));0<f.length&&z.T.remove(b.parentNode,"hidden")})};a.ZL=function(b){var c={0:"fullname",1:"url_token",2:"avatar",3:"id",4:"headline",5:"reason",
6:"type"};b=z.zb(b,function(a,b,d){a[c[d]]=b;return a},{});return new a(b)};b.prototype.template=(0,z.Wr)('\x3ca href\x3d"#" data-tip\x3d"s$r$不感兴趣" class\x3d"del"\x3e\x3ci class\x3d"icon icon-ignore"\x3e\x3c/i\x3e\x3c/a\x3e\x3ca data-tip\x3d"p$t$\x3c%\x3durl_token%\x3e" href\x3d"/people/\x3c%\x3durl_token%\x3e" class\x3d"avatar"\x3e\x3cimg src\x3d"\x3c%\x3davatar%\x3e"\x3e\x3c/a\x3e\x3cdiv class\x3d"bd"\x3e\x3ca href\x3d"/people/\x3c%\x3durl_token%\x3e" data-tip\x3d"p$t$\x3c%\x3durl_token%\x3e"\x3e\x3c%\x3dfullname%\x3e\x3c/a\x3e\x3cdiv class\x3d"headline"\x3e\x3cspan title\x3d"\x3c%-headline%\x3e"\x3e\x3c%-headline%\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"ft"\x3e\x3cspan class\x3d"reason"\x3e\x3c%\x3dreason%\x3e\x3c/span\x3e \x3cspan class\x3d"zg-bull"\x3e\x26bull;\x3c/span\x3e \x3ca class\x3d"zg-follow follow" href\x3d"#" id\x3d"sugg-\x3c%\x3did%\x3e"\x3e关注\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
b.prototype.Yu=function(){var a=this.LG,b=this.K;b.on("click",".del",function(c){c.preventDefault();window.$.post("/un_trending",{id:a.id,type:a.type});b.remove()}).on("click",".follow",function(b){b.preventDefault();(0,z.EC)(this,a.type,z.sa(z.oo,this),null,{follow_text:"关注"})})};b.prototype.ga=function(){this.K.html(this.template(this.LG));return this};c.prototype.ga=function(){var a=this.K;window.$.each(this.GL,function(c,g){a.append((new b(g)).ga().K)});return this};(0,window.$)(function(){var a=
z.L("zh-trendings");a&&(new nI).w(a)})})();z.v(oI,z.S);oI.prototype.init=function(){z.uE.L(this);this.w(window.document.body)};oI.prototype.D=function(){oI.o.D.call(this);this.eo("zh-question-followers-list-wrap")};oI.prototype.eo=function(a){if(a=z.L(a)){var b=new z.Nu;this.L(b);b.use("locationSource");b.w(a)}};z.v(qI,z.S);qI.prototype.init=function(){z.uE.L(this);this.w(window.document.body);this.xs();sI(this);tI(this);rI();pI("[data-highlight]",this.nA)};
qI.prototype.xs=function(){function a(a){var b=new z.S;(0,window.$)("li.answer-item",a).each(function(){var a=new z.BC.prototype.zk;a.at="actions";a.Wp="zm-votebar";a.mr="z-icon-fold";a.du="sprite-global-icon-fold-white";b.L(a);a.w(this)});return b}var b=this;(0,window.$)("[data-paging]").each(function(){var c=new z.Nu({use:["dataPagingSource"]});c.use("childConstructor",{factory:a});var d=(0,window.$)(this).data("navigable");d&&c.use("shortcut",d);b.L(c);c.w(this);z.Ju(c,function(a){pI((0,window.$)("[data-highlight]",
a),b.nA)})})};var DI=(0,window.$)("#is-topstory2").length?"topstory2":"homefeed",vI=z.D&&!z.F(9),yI={ac:"actioncard",q:"question",a:"answer",p:"article",c:"column",r:"roundtable"},AI={question:"question",answer:"question",article:"column",column:"column",roundtable:"roundtable"},BI={question:"question",answer:"question",article:"article",column:"column",roundtable:"roundtable"};uI.prototype.Bb=function(){this.QB=(0,window.$)('meta[itemprop\x3d"ZReactor"]',this.vh);this.QB.length&&(xI(this),this.QO())};
uI.prototype.hS=function(){var a=[],b=z.Go(550,function(){a.length&&(wI(a),a=[])});return function(c){a.push(c);b()}}();
uI.prototype.QO=z.zj(function(){z.H(z.Y,"click_feed_fresh",function(a){wI({mid:z.Ak.ga_vars.user_hash,object_type:"btn",object_id:2,object_meta:{load_items:a.data.count},action_type:"click",context:DI,others:"",time:(0,z.w)()})});z.H(z.Y,"topstory_feed_more",function(){wI({mid:z.Ak.ga_vars.user_hash,object_type:"btn",object_id:1,object_meta:{next:(0,window.$)("#js-home-feed-list .feed-item").length+1},action_type:"click",context:DI,others:"",time:(0,z.w)()})})});z.v(EI,z.Bv);EI.prototype.Tg=function(a){a&&!a.r&&(a=a.msg,a.length?(z.R(this.$b,0<a.length),this.offset+=a.length,this.yq(a),z.Cv(this,!1),z.Fv(this)):this.wk.hide())};var fJ={ROUNDTABLE_ADD_RELATED:"roundtable",ARTICLE_VOTE_UP:"post_vote",ARTICLE_CREATE:"post_create",RECOMMENDED:"feed_recommended",QUESTION_FOLLOW:"feed_question_follow",QUESTION_CREATE:"feed_question",ANSWER_VOTE_UP:"feed_answer_vote",ANSWER_CREATE:"feed_answer_answer"};
EI.prototype.oO=function(a){var b=a.currentTarget.h.getAttribute("data-feedtype"),b=fJ[b];"comment"===a.namespace&&b&&a.Lc.fill("category","feed").fill("label",b)};EI.prototype.Vj=function(a){var b=z.eA(a);this.L(b);this.v().g(b,"click!",this.oO);b.w(a);new uI(b);return b};EI.prototype.FH=function(a){return{params:a,method:"next"}};z.ea(GI);z.v(KI,z.S);z.e=KI.prototype;z.e.D=function(){KI.o.D.call(this);this.K=(0,window.$)(this.h);if(this.ue=z.L("zh-main-feed-fresh-button"))this.aq=(0,window.$)(this.ue),this.AP?(this.v().g(this.ue,"click",this.CS),this.v().g(z.Y,"topstory2",this.kF)):this.ZF?(this.v().g(this.ue,"click",this.BS),this.v().g(z.Y,"topstory",this.kF)):(this.v().g(this.ue,"click",this.NT),this.v().g(z.Y,"homefeed",this.XN));LI(this);PI(this);OI(this)};
z.e.BS=function(){this.aq.text("加载中…");this.yi=0;var a=this;this.Wa.offset=0;this.Wa.jh=0;z.Ev(this.Wa,!0,function(){FI(a.Wa)}).done(function(){a.aq.hide();z.Dv(a.Wa)})};z.e.CS=function(){this.aq.text("加载中…");var a=this.yi;this.yi=0;var b=this;this.Wa.offset=a;this.Wa.jh="live";z.Ev(this.Wa,!0,null,function(a){a&&a.msg.length&&(b.Wa.yq(a.msg,"prepend"),b.aq.hide())});z.Y.Aa({type:"click_feed_fresh",data:{count:a}})};
z.e.NT=function(){var a=z.N("zm-home-question-list-devider",this.h);a&&z.T.remove(a,"zm-home-question-list-devider");var a=this.gt.length,b=(0,window.$)("."+this.kE,this.h)[0];b&&5<=a&&((0,window.$)(".feed-separator-hook",this.h).next(".feed-item-hook").css("border-top","1px solid #eee").end().remove(),(0,window.$)(b).css("border-top","none").before('\x3cdiv class\x3d"feed-item-hook feed-separator-hook feed-separator"\x3e\x3cspan\x3e上次你看到这里\x3c/span\x3e\x3c/div\x3e'));z.A(this.gt,function(a){var b=
(0,window.$)("."+this.kE,this.h)[0];b?z.Qf(a,b):this.h.appendChild(a)},this);this.gt=[];z.R(this.ue,!1);JI();z.Y.Aa({type:"ga_click_feed_fresh",data:{count:a}})};
z.e.XN=function(a){var b=(0,z.x)(a.mf);a=this.gt;var c=a.length;if(b&&!(500<c)){var d=z.Lf(b),f=this.yy,g=function(a){return(a=z.$b(f,a,void 0))&&f[a]},b=function(){return g(function(a){return a.pa===m.pa})},h=function(){return g(function(a){return a.ma===m.ma})},k=function(){return g(function(a){return a.Gb===m.Gb})};if(!function(){return g(function(a){return a.m().id===d.id})}()){var m=this.Wa.Vj(d);if(m.pa){if(b())return}else if(m.ma){if(h())return}else if(m.Gb&&k())return;MI(this,m);a.push(d);
c+=1;this.ue&&(this.ue.innerHTML=(99<c?"99+":c)+" 条新动态",z.R(this.ue,!0))}}};z.e.kF=function(a){this.yi=this.yi||0;this.yi+=+a.mf;this.ue&&(this.ue.innerHTML=(99<this.yi?"99+":this.yi)+" 条新动态",z.R(this.ue,!0))};z.v(QI,z.yl);QI.prototype.init=function(){var a=z.L("home-suggest-block");a&&(this.h=a,a=z.L("home-suggest-close-button"),this.v().wa(a,"click",function(){(new z.V(!0)).ajax("/option","key\x3dno_show_lookup\x26value\x3d1");z.R(this.h,!1)}),a=z.L("home-suggest-refresh-button"),this.v().g(a,"click",this.iR),this.Us=z.L("home-suggest-list"),TI(this))};QI.prototype.iR=function(){RI(this);return!0};
QI.prototype.IQ=function(a){a.r||((a=a.msg)&&z.ha(a)&&a.length?(this.Rx=[],this.HD=a,RI(this)):this.Us.innerHTML="")};z.v(UI,z.S);UI.prototype.init=function(){z.uE.L(this);this.w(window.document.body)};UI.prototype.D=function(){UI.o.D.call(this);var a=z.L("js-home-feed-list");if(a){var b=new KI;this.L(b);b.w(a)}z.L("home-settings-page-wrap")&&(a=z.L("zh-topic-block-editor"))&&(new z.Mp(z.XC)).w(a);(new QI).init();WI();VI();a=GI.W();HI(a);AH()};z.v(XI,z.S);XI.prototype.init=function(){z.uE.L(this);this.w(window.document.body)};XI.prototype.D=function(){XI.o.D.call(this);var a=(0,window.$)("#zh-following-question-item-list").children(".zh-general-list");if(a.length){var b=new z.Nu;this.L(b);b.use("nodeSource");b.w(a.get(0))}};z.v(YI,z.S);YI.prototype.init=function(){z.uE.L(this);this.w(window.document.body)};YI.prototype.D=function(){YI.o.D.call(this);ZI(this);this.hy();$I(this);aJ();this.v().g(this,"click!",function(a){"comment"===a.namespace&&a.Lc.fill("category",this.Vg).fill("label",this.FM)})};YI.prototype.hy=function(){var a=1,b=(0,window.$)("ul.hot-favlists"),c=null;(0,window.$)("#js-hot-fav-switch").click(function(){c&&"pending"===c.state()||(a=5<=a?1:a+1,c=IG(a).done(function(a){b.html(a)}))})};
YI.prototype.iy=function(a){if(!a.data("inited")){a.data("inited",!0);var b={daily:HG,monthly:JG}[a.data("type")],b=new bJ(b);b.use("expandLimit");this.L(b);b.w(a[0])}};z.v(bJ,z.Nu);bJ.prototype.D=function(){bJ.o.D.call(this);this.use("childConstructor",{Sk:z.Xz})};z.wa("ZH.entryQuestionFollowersPage",function(){(new oI).init()});z.wa("ZH.entrySQ",function(){(new DH).init()});z.wa("ZH.entrySA",function(){(new VH).init()});z.wa("ZH.entryL",function(){(new LG).init()});z.wa("ZH.entryT",function(){(new qG).init()});z.wa("ZH.entrySearch",function(){(new qI).init()});z.wa("ZH.entryPM",function(){(new fG).init()});z.wa("ZH.entryPMDetail",function(){(new hG).init()});z.wa("ZH.entryTopicFeed",function(){(new aI).init()});z.wa("ZH.entryHome",function(){(new UI).init()});
z.wa("ZH.entryQuestionFollowing",function(){(new XI).init()});z.wa("ZH.entryExplore",function(){(new YI).init()});z.qh("page-main");}).call(this, __z_z__);
//# sourceURL=/static/revved/-/js/closure/page-main.7d067a7b.js